<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Astra Play Demo</title>
    <!-- Tailwind via CDN for quick styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM production builds for reliability on Vercel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel standalone to transpile JSX in the browser -->
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="dark:bg-zinc-950 dark:text-zinc-100">
    <div id="root"></div>
      <script type="text/babel" data-presets="env,react">
              // Code imported from astra_play_gamified_astrology_preview.jsx

        const { useState, useEffect, useMemo } = React;

        // --- Lightweight UI helpers (no external deps) ---
      const Card = ({ children, className = "" }) => (
        <div className={`rounded-2xl shadow-lg border border-black/5 bg-white/80 dark:bg-zinc-900/80 backdrop-blur p-5 ${className}`}>{children}</div>
      );
      const Button = ({ children, onClick, variant = "primary", className = "", disabled = false, type = "button" }) => {
        const base = "px-4 py-2 rounded-xl font-semibold transition active:scale-[.98] disabled:opacity-50 disabled:cursor-not-allowed";
        const styles = {
          primary: "bg-indigo-600 hover:bg-indigo-700 text-white",
          ghost: "bg-transparent hover:bg-black/5 dark:hover:bg-white/5 border border-black/10 dark:border-white/10",
          success: "bg-emerald-600 hover:bg-emerald-700 text-white",
        };
        return (
          <button type={type} onClick={onClick} className={`${base} ${styles[variant]} ${className}`} disabled={disabled}>
            {children}
          </button>
        );
      };
      const Badge = ({ children }) => (
        <span className="inline-flex items-center gap-1 text-xs font-medium px-2 py-1 rounded-full bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-200">{children}</span>
      );
      
      // --- Fake content seeds ---
      const HOUSES = [
        "Arcanum",
        "Beacon",
        "Catalyst",
        "Dawn",
        "Ember",
        "Flux",
        "Glyph",
        "Harbor",
        "Ion",
        "Jade",
        "Kindred",
        "Lumina",
      ];
      
      const DAILY_SCENARIOS = [
        {
          id: "work_pitch",
          title: "Your morning has a bold edge. Pitch now or prep more?",
          a: "Pitch now (ride momentum)",
          b: "Prep more (send tomorrow)",
          tip: "Mars-Mercury vibes favor decisive starts; keep it concise.",
        },
        {
          id: "date_text",
          title: "Thinking about texting someone new—go playful or direct?",
          a: "Playful opener",
          b: "Direct invite",
          tip: "Venus in a curious angle rewards warmth + clarity in two beats.",
        },
        {
          id: "fitness",
          title: "Energy window appears late afternoon—lift or long walk?",
          a: "Short, heavy lift",
          b: "45-min walk + stretch",
          tip: "Pick what you’ll celebrate finishing. Consistency > intensity.",
        },
      ];

      const LIFE_PATH_BLURBS = {
        1: "Pioneer energy—leadership, self-starter vibes, and fresh momentum.",
        2: "Diplomat energy—collaboration, intuition, and harmonizing groups.",
        3: "Creator energy—communication, play, and shipping ideas quickly.",
        4: "Builder energy—systems, discipline, and turning plans into reality.",
        5: "Explorer energy—adaptability, travel, and learning by doing.",
        6: "Steward energy—care, hosting, and steadying the people around you.",
        7: "Analyst energy—research, reflection, and spotting the signal in noise.",
        8: "Strategist energy—ambition, influence, and resourcing the mission.",
        9: "Humanitarian energy—big-picture service and closing loops with grace.",
        11: "Visionary master number—intuition, inspiration, and elevating the room.",
        22: "Architect master number—precision, long-view planning, and bold builds.",
      };

      const ENERGY_WINDOWS = [
        {
          day: "Today",
          focus: "Deep Work",
          window: "10:00–12:00",
          cue: "Ship 1 thing while momentum is high.",
        },
        {
          day: "Tomorrow",
          focus: "Connection",
          window: "14:00–16:00",
          cue: "Send 2 outreach notes or schedule a check-in.",
        },
        {
          day: "Sat",
          focus: "Recharge",
          window: "09:30–11:00",
          cue: "Low stakes movement + reset your calendar.",
        },
      ];

      // --- Utilities ---
      const clamp = (n, min, max) => Math.max(min, Math.min(max, n));
      const getAstroSign = (dateStr) => {
        const date = new Date(dateStr);
        if (Number.isNaN(date.getTime())) return null;

        const month = date.getUTCMonth() + 1;
        const day = date.getUTCDate();

        const ranges = [
          { start: [1, 20], end: [2, 18], sign: "Aquarius" },
          { start: [2, 19], end: [3, 20], sign: "Pisces" },
          { start: [3, 21], end: [4, 19], sign: "Aries" },
          { start: [4, 20], end: [5, 20], sign: "Taurus" },
          { start: [5, 21], end: [6, 20], sign: "Gemini" },
          { start: [6, 21], end: [7, 22], sign: "Cancer" },
          { start: [7, 23], end: [8, 22], sign: "Leo" },
          { start: [8, 23], end: [9, 22], sign: "Virgo" },
          { start: [9, 23], end: [10, 22], sign: "Libra" },
          { start: [10, 23], end: [11, 21], sign: "Scorpio" },
          { start: [11, 22], end: [12, 21], sign: "Sagittarius" },
          // Capricorn spans the end and start of the calendar year.
          { start: [12, 22], end: [12, 31], sign: "Capricorn" },
          { start: [1, 1], end: [1, 19], sign: "Capricorn" },
        ];

        return (
          ranges.find(({ start, end }) => {
            const [startMonth, startDay] = start;
            const [endMonth, endDay] = end;
            const inStartMonth = month === startMonth && day >= startDay;
            const inEndMonth = month === endMonth && day <= endDay;
            const inBetweenMonths = month > startMonth && month < endMonth;
            return inStartMonth || inEndMonth || inBetweenMonths;
          })?.sign || "Capricorn"
        );
      };
      
      const getChineseZodiac = (dateStr) => {
        const date = new Date(dateStr);
        if (Number.isNaN(date.getTime())) return null;
        const animals = [
          "Rat",
          "Ox",
          "Tiger",
          "Rabbit",
          "Dragon",
          "Snake",
          "Horse",
          "Goat",
          "Monkey",
          "Rooster",
          "Dog",
          "Pig",
        ];
        const year = date.getUTCFullYear();
        return animals[(year - 4) % 12];
      };
      
      const formatMonthDay = (date) =>
        date.toLocaleDateString("en-US", { month: "short", day: "numeric" });
      
      const generateCompatDates = (dateStr) => {
        const baseDate = new Date(dateStr);
        if (Number.isNaN(baseDate.getTime())) return null;
        const offsets = [5, 13, 21, 34, 55];
        const builds = (shift) => formatMonthDay(new Date(baseDate.getTime() + shift * 24 * 60 * 60 * 1000));
        return {
          love: [builds(offsets[1]), builds(offsets[3]), builds(offsets[0])],
          business: [builds(offsets[2]), builds(offsets[4]), builds(offsets[0])],
          friend: [builds(offsets[0]), builds(offsets[1]), builds(offsets[2])],
        };
      };
      
      class ErrorBoundary extends React.Component {
        constructor(props) {
          super(props);
          this.state = { hasError: false };
        }

        static getDerivedStateFromError() {
          return { hasError: true };
        }

        componentDidCatch(error, info) {
          console.error('ErrorBoundary caught error', error, info);
        }

        render() {
          if (this.state.hasError) {
            return <div className="p-6 text-center text-sm">Something went wrong while loading this page.</div>;
          }
          return this.props.children;
        }
      }

      function AstraPlayDemo() {
        // Theme
        const [dark, setDark] = useState(true);
        useEffect(() => {
          document.documentElement.classList.toggle('dark', dark);
        }, [dark]);
      
        // Session state
        const [level, setLevel] = useState(3);
        const [xp, setXp] = useState(45); // out of 100
        const [house, setHouse] = useState(null);
        const [seasonDaysLeft] = useState(20);
        const [stars, setStars] = useState(12); // soft currency
        const [profile, setProfile] = useState({
          name: "",
          email: "",
          phone: "",
          birthdate: "",
          location: "",
          intent: "",
        });
        const [onboardingStep, setOnboardingStep] = useState(0);
        const [profileInsights, setProfileInsights] = useState(null);
        const [showOnboarding, setShowOnboarding] = useState(true);
        const [friendTree, setFriendTree] = useState([]);
        const [newFriend, setNewFriend] = useState({ name: "", birthday: "", role: "" });

        const onboardingSteps = [
          {
            id: 'focus',
            label: 'Priority',
            title: 'What should Astra optimize first?',
            helper: 'We use this to anchor your timing nudges and quests.',
            options: ['Money & work', 'Love & connection', 'Clarity & rhythm'],
          },
          {
            id: 'identity',
            label: 'Basics',
            title: 'Share your essentials',
            helper: 'This powers your account tile and sends your brief.',
          },
          {
            id: 'timing',
            label: 'Birth data',
            title: 'When and where were you born?',
            helper: 'Unlocks sign, Life Path, and compatibility seeding.',
          },
          {
            id: 'connect',
            label: 'Alerts',
            title: 'Where should we send timing alerts?',
            helper: 'Add a phone or email for quick check-ins.',
          },
        ];

        const onboardingProgress = Math.round(((onboardingStep + 1) / onboardingSteps.length) * 100);
        const currentOnboardingStep = onboardingSteps[onboardingStep];
      
        // Check-in state
        const [mood, setMood] = useState(null); // low/ok/high
        const [focus, setFocus] = useState(null);
        const [connection, setConnection] = useState(null);
        const checkinComplete = Boolean(mood && focus && connection);
        const [checkinAwarded, setCheckinAwarded] = useState(false);

        // Tools + calculators
        const [birthDate, setBirthDate] = useState("");
        const [lifePathNumber, setLifePathNumber] = useState(null);
        const [lifePathAwarded, setLifePathAwarded] = useState(false);
        const [compatA, setCompatA] = useState({ name: "You", date: "" });
        const [compatB, setCompatB] = useState({ name: "Partner", date: "" });
        const [compatResult, setCompatResult] = useState(null);
        const [compatAwarded, setCompatAwarded] = useState(false);

        // Energy calendar + cue chats + brand date tools
        const [energyDate, setEnergyDate] = useState("");
        const [energyOutcome, setEnergyOutcome] = useState(null);
        const [energyAwarded, setEnergyAwarded] = useState(false);
        const [cueQuestion, setCueQuestion] = useState("");
        const [cueReply, setCueReply] = useState(null);
        const [cueAwarded, setCueAwarded] = useState(false);
        const [brandName, setBrandName] = useState("");
        const [brandDate, setBrandDate] = useState("");
        const [brandResult, setBrandResult] = useState(null);
        const [brandAwarded, setBrandAwarded] = useState(false);

        // Landing snippet preview state (one-time samples)
        const [landingEnergyDate, setLandingEnergyDate] = useState("");
        const [landingEnergyResult, setLandingEnergyResult] = useState(null);
        const [landingCompatInput, setLandingCompatInput] = useState({ brand: "", date: "" });
        const [landingCompatResult, setLandingCompatResult] = useState(null);
        const [landingLifeDate, setLandingLifeDate] = useState("");
        const [landingLifeResult, setLandingLifeResult] = useState(null);
        const [freeOutputs, setFreeOutputs] = useState({ energyUsed: false, compatUsed: false, lifeUsed: false });

        // Lead capture + account login (Google Sheet sync)
        const GOOGLE_SHEET_ID = "1C3vEjFbw61imNVc7Cb9udlQd3LDcdNeN6trPwdvAHYw";
        const GOOGLE_SHEET_WEBHOOK = "https://script.google.com/macros/s/AKfycbxpQKTDy6modpCnN7jakOStJ0dXiBuosKuo6oZvi57lc1j91-ukQS7D0_O20hV2Cwc/exec";
        const [leadForm, setLeadForm] = useState({
          fullName: "",
          email: "",
          phone: "",
          reason: "",
        });
        const [leadStatus, setLeadStatus] = useState("idle");
        const [leadError, setLeadError] = useState(null);
        const [loginStatus, setLoginStatus] = useState("idle");
        const [loginError, setLoginError] = useState(null);
        const [accountLogin, setAccountLogin] = useState({ email: "", consent: true });

        // Mini-game: Decision Duel
        const scenario = useMemo(() => DAILY_SCENARIOS[Math.floor(Math.random()*DAILY_SCENARIOS.length)], []);
        const [choice, setChoice] = useState(null);
        const [duelDone, setDuelDone] = useState(false);
      
        // Quests
        const [quests, setQuests] = useState([
          { id: 'q1', label: 'Complete daily check‑in', done: false, xp: 20 },
          { id: 'q2', label: 'Read your guidance brief', done: false, xp: 15 },
          { id: 'q3', label: 'Play 1 mini‑game', done: false, xp: 25 },
          { id: 'q4', label: 'Invite 1 person to your tree', done: false, xp: 15 },
          { id: 'q5', label: 'Run the Energy Calendar for today', done: false, xp: 10 },
        ]);
      
        // Derived guidance stub
        const guidance = useMemo(() => {
          const tags = [];
          if (mood === "high") tags.push("Ride confidence early.");
          if (mood === "low") tags.push("Set a tiny win before noon.");
          if (focus === "high") tags.push("Deep work block: 45–60 min.");
          if (connection === "high") tags.push("Send a 2‑line check‑in to a friend.");
          if (tags.length === 0)
            tags.push("Light touch today. One meaningful action > many half‑starts.");
          return tags.slice(0, 3);
        }, [mood, focus, connection]);

        // Helpers for calculators
        const reduceNumber = (value) => {
          let sum = value;
          while (sum > 22 || (sum > 9 && sum !== 11 && sum !== 22)) {
            sum = sum
              .toString()
              .split("")
              .reduce((acc, digit) => acc + parseInt(digit, 10), 0);
          }
          return sum;
        };

        const computeLifePath = (dateStr) => {
          const digits = dateStr.replace(/\D/g, "");
          if (digits.length < 8) return null;
          const total = digits.split("").reduce((acc, d) => acc + parseInt(d, 10), 0);
          return reduceNumber(total);
        };

        const computeCompatibility = (a, b) => {
          const names = `${a.name}${b.name}`.toLowerCase();
          const birthdays = `${a.date}${b.date}`.replace(/\D/g, "");
          if (birthdays.length < 8) return null;
          const nameScore = names
            .split("")
            .reduce((acc, ch) => acc + ch.charCodeAt(0), 0);
          const dateScore = birthdays
            .split("")
            .reduce((acc, d) => acc + parseInt(d, 10), 0);
          const base = reduceNumber((nameScore + dateScore) % 99);
          const normalized = clamp(Math.round((base / 22) * 100), 1, 99);
          const vibe =
            normalized >= 80
              ? "High sync—greenlight shared moves."
              : normalized >= 60
              ? "Supportive—align on timing and clarify roles."
              : normalized >= 40
              ? "Neutral—start small and iterate together."
              : "Edgy—set guardrails and keep it light.";
          const anchor = normalized >= 60 ? "Double down on shared wins." : "Keep scope small & playful.";
          return { score: normalized, vibe, anchor };
        };

        const generateProfileInsights = (payload) => {
          const { birthdate, name, location } = payload;
          const lifePath = computeLifePath(birthdate);
          const astroSign = getAstroSign(birthdate);
          const chineseZodiac = getChineseZodiac(birthdate);
          const luckyNumbers = lifePath
            ? [lifePath, (lifePath % 9) || 9, Math.max(1, (lifePath + 3) % 9)]
            : [7, 3, 9];
          const unluckyNumbers = lifePath
            ? [Math.max(1, (lifePath + 4) % 9), Math.max(1, (lifePath + 6) % 9)]
            : [4, 8];
          const compat = generateCompatDates(birthdate);
          const chart = astroSign
            ? `${name || 'You'} carry ${astroSign} sun momentum with a ${chineseZodiac || 'mystery'} year imprint. Anchor decisions in ${location || 'your city'} during your ${compat?.business?.[0] || 'next high window'} surge.`
            : 'Set your birth details to unlock a chart note.';
          return { lifePath, astroSign, chineseZodiac, luckyNumbers, unluckyNumbers, compat, chart };
        };

        // Functions
        const grantXP = (amount) => {
          setXp((prevXp) => {
            let total = prevXp + amount;
            let levelsEarned = 0;
      
            while (total >= 100) {
              total -= 100;
              levelsEarned += 1;
            }
      
            if (levelsEarned) {
              setLevel((lvl) => lvl + levelsEarned);
              setStars((curr) => curr + levelsEarned); // small bonus per level
            }
      
            return clamp(total, 0, 100);
          });
        };

        const goToOnboardingStep = (index) =>
          setOnboardingStep(clamp(index, 0, onboardingSteps.length - 1));
        const nextOnboardingStep = () => goToOnboardingStep(onboardingStep + 1);
        const prevOnboardingStep = () => goToOnboardingStep(onboardingStep - 1);
        const isFinalOnboardingStep = onboardingStep === onboardingSteps.length - 1;

        const personalizeProfile = () => {
          if (!profile.name || !profile.birthdate || !profile.email)
            return alert('Add name, email, and birth date to personalize.');
          const insights = generateProfileInsights(profile);
          setProfileInsights(insights);
          setBirthDate(profile.birthdate);
          setLifePathNumber(insights.lifePath);
          setShowOnboarding(false);
          if (insights.lifePath && !lifePathAwarded) {
            grantXP(15);
            setLifePathAwarded(true);
          }
          if (insights.compat) {
            setFriendTree([
              { name: 'Muse', birthday: insights.compat.love[0], role: 'Love match' },
              { name: 'Dealflow', birthday: insights.compat.business[0], role: 'Business partner' },
              { name: 'Kindred', birthday: insights.compat.friend[0], role: 'Best friend' },
            ]);
          }
        };
      
        const completeQuest = (id) => {
          setQuests((prev) => prev.map(q => q.id === id ? { ...q, done: true } : q));
        };
      
        const handleCheckin = () => {
          if (!checkinComplete || checkinAwarded) return;
          grantXP(25);
          completeQuest('q1');
          setCheckinAwarded(true);
        };

        const handleLifePathChange = (value) => {
          setBirthDate(value);
          const lp = computeLifePath(value);
          setLifePathNumber(lp);
          if (lp && !lifePathAwarded) {
            grantXP(10);
            setLifePathAwarded(true);
          }
        };

        const handleCompat = () => {
          const result = computeCompatibility(compatA, compatB);
          setCompatResult(result);
          if (result && !compatAwarded) {
            grantXP(10);
            setCompatAwarded(true);
          }
        };

        const handleEnergyCalendar = () => {
          const outcome = evaluateEnergyDate(energyDate);
          setEnergyOutcome(outcome);
          if (outcome && !energyAwarded) {
            grantXP(8);
            setEnergyAwarded(true);
          }
        };

        const handleCueChats = () => {
          const reply = evaluateCueChats(cueQuestion);
          setCueReply(reply);
          if (reply && !cueAwarded) {
            grantXP(8);
            setCueAwarded(true);
          }
        };

        const handleBrandCheck = () => {
          const result = evaluateBrandDate(brandName, brandDate);
          setBrandResult(result);
          if (result && !brandAwarded) {
            grantXP(8);
            setBrandAwarded(true);
          }
        };

        const runLandingEnergy = () => {
          const result = evaluateEnergyDate(landingEnergyDate);
          if (!result) return;
          if (freeOutputs.energyUsed) {
            setLandingEnergyResult({ locked: true, note: "One free window preview used. Sign up to unlock daily energy." });
            return;
          }
          setLandingEnergyResult({ locked: false, ...result });
          setFreeOutputs((prev) => ({ ...prev, energyUsed: true }));
        };

        const runLandingCompat = () => {
          const result = evaluateBrandDate(landingCompatInput.brand || "Brand", landingCompatInput.date);
          if (!result) return;
          if (freeOutputs.compatUsed) {
            setLandingCompatResult({ locked: true, message: "Free compatibility sample used. Start Basic to keep matching." });
            return;
          }
          setLandingCompatResult({ locked: false, ...result });
          setFreeOutputs((prev) => ({ ...prev, compatUsed: true }));
        };

        const runLandingLifePath = () => {
          const lp = computeLifePath(landingLifeDate);
          if (!lp) {
            setLandingLifeResult({ error: "Add a valid birth date to preview your Life Path." });
            return;
          }
          if (freeOutputs.lifeUsed) {
            setLandingLifeResult({ locked: true, message: "Free Life Path reading used. Start Basics to keep exploring." });
            return;
          }
          setLandingLifeResult({ locked: false, path: lp, blurb: LIFE_PATH_BLURBS[lp] });
          setFreeOutputs((prev) => ({ ...prev, lifeUsed: true }));
        };

        const sendToSheet = async (payload) => {
          try {
            const response = await fetch(GOOGLE_SHEET_WEBHOOK, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              mode: "no-cors",
              body: JSON.stringify({
                sheetId: GOOGLE_SHEET_ID,
                ...payload,
              }),
            });

            if (!response.ok && response.type !== "opaque") {
              throw new Error("Request to Google Sheets failed.");
            }

            return true;
          } catch (error) {
            console.error("Google Sheet sync failed", error);
            return false;
          }
        };

        const handleLeadSubmit = async (event) => {
          event.preventDefault();
          const payload = {
            ...leadForm,
            source: "signup-form",
            timestamp: new Date().toISOString(),
          };
          setLeadStatus("submitting");
          setLeadError(null);
          const ok = await sendToSheet(payload);

          if (ok) {
            setLeadStatus("submitted");
            setLeadForm({ fullName: "", email: "", phone: "", reason: "" });
          } else {
            setLeadStatus("failed");
            setLeadError("We couldn't reach Google Sheets. Please try again.");
          }
        };

        const handleAccountLogin = async (event) => {
          event.preventDefault();
          const enriched = {
            fullName: leadForm.fullName || "Astra login",
            email: accountLogin.email,
            phone: leadForm.phone,
            reason: leadForm.reason || "Existing member login",
            source: "astra-login",
            consent: accountLogin.consent,
            timestamp: new Date().toISOString(),
          };

          setLoginStatus("submitting");
          setLoginError(null);
          const ok = await sendToSheet(enriched);

          if (ok) {
            setLoginStatus("submitted");
            setAccountLogin({ email: "", consent: true });
          } else {
            setLoginStatus("failed");
            setLoginError("We couldn't reach Google Sheets. Please try again.");
          }
        };

        const addFriendToTree = () => {
          if (!newFriend.name || !newFriend.birthday || !newFriend.role)
            return alert('Add a name, birthday, and role to invite.');
          setFriendTree((prev) => [...prev, newFriend]);
          setNewFriend({ name: "", birthday: "", role: "" });
          grantXP(15);
          completeQuest('q4');
        };

        const handleDuel = (pick) => {
          if (duelDone) return;
          setChoice(pick);
          // lightweight outcome logic
          const favorA = (focus === 'high' || mood === 'high');
          const pickedA = pick === 'a';
          const win = favorA ? pickedA : !pickedA;
          setTimeout(() => {
            setDuelDone(true);
            grantXP(win ? 30 : 10);
            completeQuest('q3');
          }, 500);
        };

        const guidanceViewed = () => completeQuest("q2");

        // Featured tool helpers
        const evaluateEnergyDate = (dateStr) => {
          if (!dateStr) return null;
          const day = new Date(dateStr).getDay();
          const weekdayBonus = [1, 2, 3].includes(day);
          const weekend = day === 0 || day === 6;
          const tone = weekend
            ? "Recharge day — lighten meetings and schedule creative blocks."
            : weekdayBonus
            ? "Green window — high alignment for outreach and launches."
            : "Steady day — align 1:1s and prep decks.";
          return {
            label: weekend ? "Recharge" : weekdayBonus ? "High sync" : "Balanced",
            note: tone,
          };
        };

        const evaluateCueChats = (question) => {
          if (!question.trim()) return null;
          const nudge = question.toLowerCase().includes("launch")
            ? "Pick a Tuesday/Wednesday window; ship early in the week."
            : question.toLowerCase().includes("relationship")
            ? "Pair conversations with calm, clear time blocks."
            : "Anchor the decision to one small action within 48 hours.";
          return `CueChats: ${nudge}`;
        };

        const evaluateBrandDate = (name, dateStr) => {
          if (!name.trim() || !dateStr) return null;
          const digits = dateStr.replace(/\D/g, "");
          const base = digits
            .split("")
            .reduce((acc, d) => acc + parseInt(d, 10), 0);
          const score = clamp(Math.round((reduceNumber(base) / 22) * 100), 5, 99);
          const tag = score >= 75 ? "Launch-forward" : score >= 55 ? "Balanced" : "Iterate";
          return { score, tag };
        };

        // House leaderboard (sample)
        const leaderboard = useMemo(() => {
          const base = HOUSES.map((h) => ({ name: h, points: Math.floor(Math.random() * 900 + 100) }));
          if (house) {
            const favored = base.find((x) => x.name === house);
            if (favored) favored.points += 120; // tiny bias to feel good
          }
          return base.sort((a, b) => b.points - a.points).slice(0, 5);
        }, [house]);
      
        // Copy helpers
        const copyChallenge = async () => {
          try {
            await navigator.clipboard.writeText('Join my Decision Duel on Astra Play → (invite link)');
            alert('Challenge link copied!');
          } catch {
            alert('Copied placeholder challenge to your clipboard.');
          }
        };
      
        return (
          <div className="min-h-screen bg-gradient-to-b from-indigo-50 to-white dark:from-zinc-950 dark:to-zinc-900 text-zinc-900 dark:text-zinc-100">
            {/* Nav */}
            <header className="sticky top-0 z-30 backdrop-blur bg-white/60 dark:bg-zinc-950/60 border-b border-black/5 dark:border-white/10">
              <div className="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <div className="h-9 w-9 rounded-xl bg-indigo-600 grid place-items-center text-white font-black">A</div>
                  <div>
                    <div className="font-extrabold tracking-tight text-lg">Astra Play</div>
                    <div className="text-xs opacity-70">
                      {profile.name
                        ? `${profile.name} • ${profileInsights?.astroSign || 'Set your sign'} • LP ${lifePathNumber || '?'}`
                        : 'Daily cosmic game • Season: Sagittarius'}
                    </div>
                  </div>
                </div>
                <div className="flex items-center gap-3">
                  <Badge>Lvl {level}</Badge>
                  <div className="w-40 h-3 bg-black/5 dark:bg-white/10 rounded-full overflow-hidden">
                    <div className="h-full bg-indigo-600" style={{ width: `${xp}%`}} />
                  </div>
                  <span className="text-xs opacity-80">{xp}/100 XP</span>
                  <Button variant="ghost" onClick={() => setDark(!dark)}>{dark ? 'Light' : 'Dark'} mode</Button>
                </div>
              </div>
              <div className="max-w-6xl mx-auto px-4 pb-3 flex flex-wrap items-center gap-3 text-sm font-semibold">
                <a href="#demo" className="px-3 py-1 rounded-full bg-black/5 dark:bg-white/10">Home</a>
                <a href="#life-path" className="px-3 py-1 rounded-full bg-black/5 dark:bg-white/10">Life Path</a>
                <a href="#why-astra" className="px-3 py-1 rounded-full bg-black/5 dark:bg-white/10">Why Astra</a>
                <a href="#plans" className="px-3 py-1 rounded-full bg-black/5 dark:bg-white/10">Pricing</a>
                <a href="#faq" className="px-3 py-1 rounded-full bg-black/5 dark:bg-white/10">FAQ</a>
                <div className="ml-auto flex items-center gap-2 text-xs sm:text-sm">
                  <a href="#plans" className="font-semibold">Start Basics — $2.96/mo</a>
                  <span className="opacity-70 hidden sm:inline">|</span>
                  <a href="#login" className="opacity-80">Sign in</a>
                </div>
              </div>
            </header>

            <main
              id="demo"
              className="max-w-6xl mx-auto px-4 py-6 grid lg:grid-cols-3 gap-6 scroll-mt-20"
            >
                    {/* Left column */}
                    <section className="lg:col-span-2 space-y-6">
                      {/* Onboarding + personalization */}
                      <Card className="relative overflow-hidden border-indigo-100 dark:border-indigo-900/40">
                        <div className="flex flex-col gap-4 md:flex-row md:items-start md:justify-between">
                          <div className="space-y-1">
                            <div className="flex items-center gap-2 text-xs uppercase tracking-wide text-indigo-600">
                              <span>Welcome</span>
                              <Badge>{showOnboarding ? "New" : "Personalized"}</Badge>
                            </div>
                            <h2 className="text-xl font-bold">Tune Astra to you</h2>
                            <p className="text-sm opacity-80">
                              Guided quiz flow inspired by BestMobileVPN—tap through, pick a vibe, and we’ll calibrate your daily brief.
                            </p>
                          </div>
                          <div className="text-right space-y-2">
                            <div className="h-2 w-40 rounded-full bg-black/5 dark:bg-white/10 overflow-hidden">
                              <div className="h-full bg-gradient-to-r from-indigo-500 to-emerald-400" style={{ width: `${onboardingProgress}%` }} />
                            </div>
                            <p className="text-xs font-semibold">Step {onboardingStep + 1} of {onboardingSteps.length}</p>
                            <p className="text-xs opacity-70">{onboardingProgress}% tuned</p>
                          </div>
                        </div>

                        <div className="mt-4 grid md:grid-cols-4 gap-2 text-xs font-semibold">
                          {onboardingSteps.map((step, index) => {
                            const active = index === onboardingStep;
                            const complete = index < onboardingStep;
                            return (
                              <button
                                key={step.id}
                                onClick={() => goToOnboardingStep(index)}
                                className={`rounded-xl border px-3 py-2 text-left transition shadow-sm ${
                                  active
                                    ? 'bg-indigo-600 text-white border-indigo-500'
                                    : complete
                                    ? 'bg-white/80 dark:bg-zinc-800/70 border-emerald-400/60 text-emerald-700 dark:text-emerald-200'
                                    : 'bg-white/60 dark:bg-zinc-900/60 border-black/5 dark:border-white/10'
                                }`}
                              >
                                <div className="flex items-center justify-between">
                                  <span>{step.label}</span>
                                  {complete ? <span className="text-lg">✓</span> : <span className="text-[10px] opacity-80">{index + 1}</span>}
                                </div>
                                <p className={`mt-1 text-[11px] leading-snug ${active ? 'text-white/90' : 'opacity-70'}`}>{step.helper}</p>
                              </button>
                            );
                          })}
                        </div>

                        <div className="mt-4 p-4 rounded-2xl border border-indigo-100/60 dark:border-indigo-900/60 bg-gradient-to-br from-white to-indigo-50 dark:from-zinc-900 dark:to-indigo-950/30 shadow-inner">
                          <div className="flex items-center justify-between gap-3 flex-wrap">
                            <div>
                              <p className="text-xs uppercase tracking-wide text-indigo-600">{currentOnboardingStep.label}</p>
                              <h3 className="text-lg font-bold">{currentOnboardingStep.title}</h3>
                              <p className="text-sm opacity-80">{currentOnboardingStep.helper}</p>
                            </div>
                            <Badge>{onboardingProgress}%</Badge>
                          </div>

                          {currentOnboardingStep.id === 'focus' ? (
                            <div className="mt-3 grid sm:grid-cols-3 gap-3">
                              {currentOnboardingStep.options.map((option) => {
                                const intentCopy = {
                                  'Money & work': 'Deal flow, launches, and closing days.',
                                  'Love & connection': 'Dating, reconnection, and social glow.',
                                  'Clarity & rhythm': 'Energy pacing, resets, and rituals.',
                                };
                                const active = profile.intent === option;
                                return (
                                  <button
                                    key={option}
                                    onClick={() => setProfile({ ...profile, intent: option })}
                                    className={`text-left p-3 rounded-xl border transition shadow ${
                                      active
                                        ? 'bg-indigo-600 text-white border-indigo-500 scale-[1.01]'
                                        : 'bg-white/80 dark:bg-zinc-900/70 border-black/5 dark:border-white/10 hover:border-indigo-400'
                                    }`}
                                  >
                                    <div className="flex items-center justify-between text-sm font-semibold">
                                      <span>{option}</span>
                                      {active ? <span className="text-lg">✨</span> : <span className="text-xs opacity-60">Tap</span>}
                                    </div>
                                    <p className={`mt-1 text-xs leading-snug ${active ? 'text-white/90' : 'opacity-70'}`}>{intentCopy[option]}</p>
                                  </button>
                                );
                              })}
                            </div>
                          ) : null}

                          {currentOnboardingStep.id === 'identity' ? (
                            <div className="mt-3 grid sm:grid-cols-2 gap-3">
                              <div className="p-3 rounded-xl bg-white/80 dark:bg-zinc-900/70 border border-black/5 dark:border-white/10 space-y-1">
                                <label className="text-xs uppercase tracking-wide opacity-70">Full name</label>
                                <input
                                  value={profile.name}
                                  onChange={(e) => setProfile({ ...profile, name: e.target.value })}
                                  className="w-full px-3 py-2 rounded-lg bg-white/90 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                                  placeholder="Alex Driver"
                                />
                              </div>
                              <div className="p-3 rounded-xl bg-white/80 dark:bg-zinc-900/70 border border-black/5 dark:border-white/10 space-y-1">
                                <label className="text-xs uppercase tracking-wide opacity-70">Email</label>
                                <input
                                  value={profile.email}
                                  onChange={(e) => setProfile({ ...profile, email: e.target.value })}
                                  className="w-full px-3 py-2 rounded-lg bg-white/90 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                                  placeholder="you@email.com"
                                  type="email"
                                />
                              </div>
                            </div>
                          ) : null}

                          {currentOnboardingStep.id === 'timing' ? (
                            <div className="mt-3 grid sm:grid-cols-2 gap-3">
                              <div className="p-3 rounded-xl bg-white/80 dark:bg-zinc-900/70 border border-black/5 dark:border-white/10 space-y-1">
                                <label className="text-xs uppercase tracking-wide opacity-70">Birth date</label>
                                <input
                                  value={profile.birthdate}
                                  onChange={(e) => setProfile({ ...profile, birthdate: e.target.value })}
                                  className="w-full px-3 py-2 rounded-lg bg-white/90 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                                  type="date"
                                />
                              </div>
                              <div className="p-3 rounded-xl bg-white/80 dark:bg-zinc-900/70 border border-black/5 dark:border-white/10 space-y-1">
                                <label className="text-xs uppercase tracking-wide opacity-70">Location</label>
                                <input
                                  value={profile.location}
                                  onChange={(e) => setProfile({ ...profile, location: e.target.value })}
                                  className="w-full px-3 py-2 rounded-lg bg-white/90 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                                  placeholder="City / TZ"
                                />
                              </div>
                            </div>
                          ) : null}

                          {currentOnboardingStep.id === 'connect' ? (
                            <div className="mt-3 grid sm:grid-cols-2 gap-3">
                              <div className="p-3 rounded-xl bg-white/80 dark:bg-zinc-900/70 border border-black/5 dark:border-white/10 space-y-1">
                                <label className="text-xs uppercase tracking-wide opacity-70">Phone (nudges)</label>
                                <input
                                  value={profile.phone}
                                  onChange={(e) => setProfile({ ...profile, phone: e.target.value })}
                                  className="w-full px-3 py-2 rounded-lg bg-white/90 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                                  placeholder="(555) 123-4567"
                                  type="tel"
                                />
                                <p className="text-[11px] opacity-70">Optional SMS for high-energy windows.</p>
                              </div>
                              <div className="p-3 rounded-xl bg-white/80 dark:bg-zinc-900/70 border border-black/5 dark:border-white/10 space-y-1">
                                <label className="text-xs uppercase tracking-wide opacity-70">Email (alerts)</label>
                                <input
                                  value={profile.email}
                                  onChange={(e) => setProfile({ ...profile, email: e.target.value })}
                                  className="w-full px-3 py-2 rounded-lg bg-white/90 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                                  placeholder="you@example.com"
                                  type="email"
                                />
                                <p className="text-[11px] opacity-70">We’ll also drop your brief here.</p>
                              </div>
                            </div>
                          ) : null}
                        </div>

                        <div className="mt-4 flex flex-wrap items-center justify-between gap-3 text-xs">
                          <Button variant="ghost" onClick={prevOnboardingStep} disabled={onboardingStep === 0}>
                            Previous
                          </Button>
                          <div className="flex items-center gap-2">
                            <span className="opacity-70">Swipe through like the sample quiz. Save at the end.</span>
                            <Button onClick={isFinalOnboardingStep ? personalizeProfile : nextOnboardingStep}>
                              {isFinalOnboardingStep ? 'Generate my cosmic brief' : 'Next question'}
                            </Button>
                          </div>
                        </div>

                        {!showOnboarding && profileInsights ? (
                          <p className="mt-3 text-xs opacity-80">Saved! {profile.name || 'Explorer'}, we tuned your feed to {profileInsights.astroSign || 'your sign'} and Life Path {profileInsights.lifePath || '?'}.</p>
                        ) : (
                          <p className="mt-3 text-xs opacity-70">We only store this locally for your session. Add details to unlock the full home experience.</p>
                        )}
                      </Card>
                {/* Tools & calculators */}
                <Card>
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-bold text-lg">Astra Toolkit</h3>
                    <Badge>Instant</Badge>
                  </div>
                  <div className="grid lg:grid-cols-2 gap-4">
                    <div className="p-4 rounded-xl bg-indigo-50/70 dark:bg-indigo-900/30 border border-indigo-200/60 dark:border-indigo-800/40">
                      <div className="flex items-center justify-between mb-2">
                        <div>
                          <p className="text-xs uppercase tracking-wide text-indigo-600">Life Path</p>
                          <p className="font-semibold">Numerology snapshot</p>
                        </div>
                        {lifePathNumber ? <Badge>#{lifePathNumber}</Badge> : null}
                      </div>
                      <label className="text-xs opacity-70">Birth date</label>
                      <input
                        type="date"
                        value={birthDate}
                        onChange={(e) => handleLifePathChange(e.target.value)}
                        className="mt-1 w-full px-3 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10 text-sm"
                      />
                      {lifePathNumber ? (
                        <div className="mt-2 text-sm">
                          <p className="font-semibold">Life Path {lifePathNumber}</p>
                          <p className="opacity-80">{LIFE_PATH_BLURBS[lifePathNumber]}</p>
                        </div>
                      ) : (
                        <p className="mt-2 text-xs opacity-70">Enter a birth date to see your core pattern.</p>
                      )}
                    </div>

                    <div className="p-4 rounded-xl bg-emerald-50/70 dark:bg-emerald-900/20 border border-emerald-200/70 dark:border-emerald-800/50">
                      <div className="flex items-center justify-between mb-2">
                        <div>
                          <p className="text-xs uppercase tracking-wide text-emerald-600">Compatibility</p>
                          <p className="font-semibold">Two-person pulse</p>
                        </div>
                        {compatResult ? <Badge>{compatResult.score}%</Badge> : null}
                      </div>
                      <div className="grid grid-cols-2 gap-2 text-xs">
                        <div className="space-y-1">
                          <input
                            type="text"
                            value={compatA.name}
                            onChange={(e) => setCompatA({ ...compatA, name: e.target.value })}
                            className="w-full px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                            placeholder="Name A"
                          />
                          <input
                            type="date"
                            value={compatA.date}
                            onChange={(e) => setCompatA({ ...compatA, date: e.target.value })}
                            className="w-full px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                          />
                        </div>
                        <div className="space-y-1">
                          <input
                            type="text"
                            value={compatB.name}
                            onChange={(e) => setCompatB({ ...compatB, name: e.target.value })}
                            className="w-full px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                            placeholder="Name B"
                          />
                          <input
                            type="date"
                            value={compatB.date}
                            onChange={(e) => setCompatB({ ...compatB, date: e.target.value })}
                            className="w-full px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                          />
                        </div>
                      </div>
                      <div className="flex items-center gap-2 mt-2">
                        <Button variant="ghost" onClick={handleCompat}>
                          Check alignment
                        </Button>
                        <span className="text-xs opacity-70">Uses initials + birthdates for a quick pulse.</span>
                      </div>
                      {compatResult ? (
                        <div className="mt-2 text-sm">
                          <p className="font-semibold">{compatResult.vibe}</p>
                          <p className="opacity-80">{compatResult.anchor}</p>
                        </div>
                      ) : null}
                    </div>
                  </div>

                  <div className="mt-4 p-4 rounded-xl bg-orange-50/70 dark:bg-orange-900/20 border border-orange-200/60 dark:border-orange-800/50">
                    <div className="flex items-center justify-between mb-2">
                      <div>
                        <p className="text-xs uppercase tracking-wide text-orange-600">Timing Calendar</p>
                        <p className="font-semibold">Energy windows</p>
                      </div>
                      <Badge>3-day</Badge>
                    </div>
                    <div className="grid sm:grid-cols-3 gap-3 text-sm">
                      {ENERGY_WINDOWS.map((slot) => (
                        <div
                          key={slot.day}
                          className="p-3 rounded-lg bg-white/70 dark:bg-zinc-800/60 border border-black/5 dark:border-white/10"
                        >
                          <div className="text-xs uppercase tracking-wide opacity-70">{slot.day}</div>
                          <div className="font-semibold">{slot.focus}</div>
                          <div className="text-xs opacity-80">{slot.window}</div>
                          <p className="text-xs mt-1 opacity-80">{slot.cue}</p>
                        </div>
                      ))}
                    </div>
                  </div>
                </Card>

                {/* Season banner */}
                <Card className="relative overflow-hidden">
                  <div className="flex items-center justify-between">
                    <div>
                      <div className="text-xs uppercase tracking-wider text-indigo-600">Season Pass</div>
                      <h2 className="text-2xl font-bold">{profileInsights?.astroSign || 'Sagittarius'} — Aim True</h2>
                      <p className="text-sm opacity-80">{seasonDaysLeft} days left • Earn cosmetics & streak freeze tokens</p>
                    </div>
                    <div className="hidden md:block w-48 h-24 bg-indigo-100/60 dark:bg-indigo-900/30 rounded-xl rotate-6" />
                  </div>
                  <div className="mt-4 w-full h-2 rounded-full bg-black/5 dark:bg-white/10 overflow-hidden">
                    <div className="h-full bg-indigo-600" style={{ width: `${clamp((100-xp)/1.2, 10, 100)}%`}} />
                  </div>
                </Card>
      
                {!showOnboarding && profileInsights ? (
                  <Card className="bg-gradient-to-r from-indigo-50 to-white dark:from-indigo-950/60 dark:to-zinc-900">
                    <div className="flex items-center justify-between mb-3">
                      <div>
                        <p className="text-xs uppercase tracking-wide text-indigo-600">Your cosmic brief</p>
                        <h3 className="text-xl font-bold">Calibrated for {profile.name || 'you'}</h3>
                        <p className="text-sm opacity-80">Daily check-ins, quests, and tools now lean on your sign + Life Path.</p>
                      </div>
                      <Button variant="ghost" onClick={() => setShowOnboarding(true)} className="text-xs">Edit</Button>
                    </div>
                    <div className="grid sm:grid-cols-2 gap-3 text-sm">
                      <div className="space-y-1 p-3 rounded-xl bg-white/80 dark:bg-zinc-800/60 border border-black/5 dark:border-white/10">
                        <div className="text-xs opacity-70">Life Path</div>
                        <div className="text-2xl font-black text-indigo-700 dark:text-indigo-200">{profileInsights.lifePath || '?'}</div>
                        <p className="text-xs opacity-80">{LIFE_PATH_BLURBS[profileInsights.lifePath] || 'Add your birth date to compute your path.'}</p>
                      </div>
                      <div className="space-y-1 p-3 rounded-xl bg-white/80 dark:bg-zinc-800/60 border border-black/5 dark:border-white/10">
                        <div className="text-xs opacity-70">Signs</div>
                        <div className="font-semibold">{profileInsights.astroSign || '—'} • {profileInsights.chineseZodiac || '—'}</div>
                        <p className="text-xs opacity-80">Lucky: {profileInsights.luckyNumbers.join(', ')} • Unlucky: {profileInsights.unluckyNumbers.join(', ')}</p>
                      </div>
                      <div className="space-y-1 p-3 rounded-xl bg-white/80 dark:bg-zinc-800/60 border border-black/5 dark:border-white/10">
                        <div className="text-xs uppercase tracking-wide opacity-70">Top birthdays</div>
                        <ul className="text-xs space-y-1">
                          <li>❤️ Love: {profileInsights.compat?.love?.join(', ')}</li>
                          <li>💼 Business: {profileInsights.compat?.business?.join(', ')}</li>
                          <li>🤝 Best friend: {profileInsights.compat?.friend?.join(', ')}</li>
                        </ul>
                      </div>
                      <div className="space-y-1 p-3 rounded-xl bg-white/80 dark:bg-zinc-800/60 border border-black/5 dark:border-white/10">
                        <div className="text-xs uppercase tracking-wide opacity-70">Birth chart micro-read</div>
                        <p className="text-sm opacity-80 leading-relaxed">{profileInsights.chart}</p>
                      </div>
                    </div>
                  </Card>
                ) : null}
      
                {/* Check-in */}
                <Card>
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-bold text-lg">1) Daily Check‑in</h3>
                    {checkinAwarded ? <Badge>+25 XP</Badge> : null}
                  </div>
                  <div className="grid sm:grid-cols-3 gap-4">
                    <CheckItem label="Mood" value={mood} setValue={setMood} />
                    <CheckItem label="Focus" value={focus} setValue={setFocus} />
                    <CheckItem label="Connection" value={connection} setValue={setConnection} />
                  </div>
                <div className="flex items-center gap-3 mt-4">
                  <Button onClick={handleCheckin} disabled={!checkinComplete || checkinAwarded}>Complete check‑in</Button>
                  <span className="text-sm opacity-70">Takes 10s • Helps tune your brief</span>
                </div>
                {profileInsights ? (
                  <div className="mt-3 text-xs opacity-80 space-y-1">
                    <p>Today is tuned for {profile.name || 'you'} as a {profileInsights.astroSign || '—'} with Life Path {profileInsights.lifePath || '?'}. Pair your check-in with:</p>
                    <ul className="list-disc pl-4 space-y-1">
                      <li>Run the Energy Calendar to pick your best outreach window.</li>
                      <li>Ask CueChats about a decision tied to your lucky numbers {profileInsights.luckyNumbers.join(', ')}.</li>
                      <li>Invite a {profileInsights.compat?.friend?.[0] || 'best-match'} birthday into your friend tree to play Decision Duel.</li>
                    </ul>
                  </div>
                ) : null}
              </Card>
      
                {/* Guidance */}
                <Card>
                  <div className="flex items-center justify-between mb-2">
                    <h3 className="font-bold text-lg">2) Guidance Drop</h3>
                    <Button variant="ghost" onClick={guidanceViewed}>Mark read</Button>
                  </div>
                  <ul className="list-disc pl-5 space-y-1">
                    {guidance.map((g,i) => <li key={i} className="text-sm">{g}</li>)}
                  </ul>
                  <p className="mt-3 text-xs opacity-70">Entertainment & wellness only. Not medical, legal, or financial advice.</p>
                </Card>
      
                {/* Mini‑game */}
                <Card>
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-bold text-lg">3) Mini‑game — Decision Duel</h3>
                    {duelDone ? <Badge>Completed</Badge> : null}
                  </div>
                  <div className="space-y-3">
                    <p className="text-md font-medium">{scenario.title}</p>
                    <div className="flex flex-col sm:flex-row gap-3">
                      <Button onClick={() => handleDuel('a')} disabled={duelDone}>A) {scenario.a}</Button>
                      <Button onClick={() => handleDuel('b')} disabled={duelDone} variant="ghost">B) {scenario.b}</Button>
                    </div>
                    {choice && (
                      <div className="mt-2 p-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/40 border border-indigo-200/60 dark:border-indigo-800/50">
                        <p className="text-sm"><b>Tip:</b> {scenario.tip}</p>
                        {duelDone ? (
                          <p className="text-sm mt-1">Outcome: <b>{choice === 'a' ? scenario.a : scenario.b}</b> was favored. <span className="opacity-70">(+XP)</span></p>
                        ) : (
                          <p className="text-sm mt-1 opacity-70">Calculating alignment…</p>
                        )}
                      </div>
                    )}
                    <div className="flex items-center gap-3">
                      <Button variant="ghost" onClick={copyChallenge}>Challenge a friend</Button>
                      <span className="text-sm opacity-70">Co‑op & leaderboards unlock with Plus</span>
                    </div>
                  </div>
                </Card>


      
            </section>
      
              {/* Right column */}
              <aside className="space-y-6">
                {/* House select & board */}
                <Card>
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-bold">House</h3>
                    {house ? <Badge>{house}</Badge> : <Badge>Pick one</Badge>}
                  </div>
                  {house ? (
                    <div>
                      <p className="text-sm opacity-80 mb-2">Top Houses this week</p>
                      <ul className="space-y-2">
                        {leaderboard.map((row, i) => (
                          <li key={row.name} className="flex items-center justify-between text-sm">
                            <span className="flex items-center gap-2"><span className="w-5 text-right">{i+1}.</span> {row.name}</span>
                            <span className="font-semibold">{row.points} pts</span>
                          </li>
                        ))}
                      </ul>
                    </div>
                  ) : (
                    <div className="grid grid-cols-3 gap-2">
                      {HOUSES.map(h => (
                        <button key={h} onClick={() => setHouse(h)} className="text-sm px-3 py-2 rounded-lg bg-black/5 dark:bg-white/10 hover:bg-black/10 dark:hover:bg-white/20">
                          {h}
                        </button>
                      ))}
                    </div>
                  )}
                </Card>
      
                <Card>
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-bold">Friend tree</h3>
                    <Badge>{profileInsights?.lifePath ? `LP ${profileInsights.lifePath}` : 'Invite'}</Badge>
                  </div>
                  <p className="text-sm opacity-80 mb-2">Build a playful map of friends, family, and new people you meet by Life Path and birthday.</p>
                  <ul className="space-y-2 text-sm">
                    {friendTree.length ? friendTree.map((f, idx) => (
                      <li key={`${f.name}-${idx}`} className="flex items-center justify-between rounded-lg bg-black/5 dark:bg-white/5 px-3 py-2">
                        <div>
                          <div className="font-semibold">{f.name} • {f.role}</div>
                          <div className="text-xs opacity-70">Birthday: {f.birthday}</div>
                        </div>
                        <span className="text-xs opacity-70">Invite to duel</span>
                      </li>
                    )) : <li className="text-xs opacity-70">Add someone with a great birthday match to start your tree.</li>}
                  </ul>
                  <div className="grid grid-cols-3 gap-2 text-xs mt-3">
                    <input value={newFriend.name} onChange={(e) => setNewFriend({ ...newFriend, name: e.target.value })} placeholder="Name" className="px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10" />
                    <input value={newFriend.birthday} onChange={(e) => setNewFriend({ ...newFriend, birthday: e.target.value })} type="date" className="px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10" />
                    <input value={newFriend.role} onChange={(e) => setNewFriend({ ...newFriend, role: e.target.value })} placeholder="Role" className="px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10" />
                  </div>
                  <div className="flex items-center justify-between mt-2">
                    <Button variant="ghost" onClick={addFriendToTree} className="text-xs px-3">Add to tree</Button>
                    {profileInsights?.compat ? (
                      <span className="text-[11px] opacity-70">Try inviting birthdays: {profileInsights.compat.friend?.slice(0,2).join(', ')}</span>
                    ) : null}
                  </div>
                </Card>
      
                {/* Quests */}
                <Card>
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-bold">Quests</h3>
                    <Badge>Daily</Badge>
                  </div>
                  <ul className="space-y-2">
                    {quests.map(q => (
                      <li key={q.id} className="flex items-center justify-between text-sm">
                        <label className="flex items-center gap-2">
                          <input type="checkbox" checked={q.done} onChange={() => completeQuest(q.id)} />
                          {q.label}
                        </label>
                        <span className="text-xs opacity-70">{q.done ? 'claimed' : `+${q.xp} XP`}</span>
                      </li>
                    ))}
                  </ul>
                </Card>
      
                {/* Wallet / Plus */}
                <Card>
                  <h3 className="font-bold mb-2">Wallet</h3>
                  <div className="flex items-center justify-between">
                    <div>
                      <div className="text-sm opacity-80">Stars (soft currency)</div>
                      <div className="text-2xl font-extrabold">{stars}</div>
                    </div>
                    <div className="text-right">
                      <div className="text-sm opacity-80">Astra Plus</div>
                      <div className="text-lg font-bold">$9.99/mo</div>
                      <Button className="mt-2">Start free trial</Button>
                    </div>
                  </div>
                </Card>
      
                {/* Disclaimers */}
                <Card className="text-xs opacity-80">
                  <p>Wellness & entertainment only. No medical, financial, or legal advice. Data used locally for personalization. Age 13+.</p>
                </Card>
              </aside>
            </main>



            {/* Marketing hero (snippet 1) */}
            <section className="max-w-6xl mx-auto px-4 py-10 space-y-6">
              <div className="grid lg:grid-cols-2 gap-8 items-center">
                <div className="space-y-4">
                  <div className="flex items-center gap-2 text-sm font-semibold text-indigo-600">
                    <span className="text-lg">✨</span>
                    <span>Timing &gt; luck</span>
                  </div>
                  <h1 className="text-3xl md:text-4xl font-black leading-tight">Make better moves on the right days.</h1>
                  <p className="text-lg text-zinc-700 dark:text-zinc-200">
                    Astra maps your high-probability windows for money, relationships, and big decisions—using your birth imprint + astrology.
                  </p>
                  <div className="flex flex-wrap gap-3">
                    <Button className="text-sm" onClick={() => document.getElementById('signup')?.scrollIntoView({ behavior: 'smooth' })}>$2.96/mo — Start Basic</Button>
                    <Button variant="ghost" className="text-sm" onClick={() => document.getElementById('plans')?.scrollIntoView({ behavior: 'smooth' })}>Compare plans</Button>
                  </div>
                  <p className="text-sm opacity-70">Cancel anytime.</p>
                  <div className="flex items-center gap-4 text-sm">
                    <div className="font-semibold">⭐️⭐️⭐️⭐️⭐️ 4.8</div>
                    <span className="opacity-70">3,000+ reviews · 200,000+ members</span>
                  </div>
                </div>
                <Card className="bg-gradient-to-br from-indigo-50 to-white dark:from-indigo-950/60 dark:to-zinc-900 border-indigo-100 dark:border-indigo-900/40">
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="text-xs uppercase tracking-wide text-indigo-600">Today’s Energy</p>
                      <h3 className="text-2xl font-extrabold">Score</h3>
                    </div>
                    <Badge>Live</Badge>
                  </div>
                  <div className="mt-4 flex items-baseline gap-3">
                    <div className="text-5xl font-black text-indigo-600">72</div>
                    <div className="text-sm opacity-80">Favorable</div>
                  </div>
                  <p className="mt-2 text-sm opacity-80">Best moves: outreach • purchases • first dates</p>
                  <div className="mt-4 grid sm:grid-cols-2 gap-3 text-sm">
                    <div className="p-3 rounded-xl bg-white/70 dark:bg-zinc-800/70 border border-black/5 dark:border-white/10">
                      <div className="text-xs uppercase tracking-wide opacity-70">Energy Calendar</div>
                      <p className="font-semibold">See your favorable windows by day.</p>
                      <p className="text-xs opacity-70">Daily favorability score + best moves.</p>
                    </div>
                    <div className="p-3 rounded-xl bg-white/70 dark:bg-zinc-800/70 border border-black/5 dark:border-white/10">
                      <div className="text-xs uppercase tracking-wide opacity-70">Compatibility</div>
                      <p className="font-semibold">Check a brand or person in seconds.</p>
                      <p className="text-xs opacity-70">One free preview before signup.</p>
                    </div>
                  </div>
                </Card>
              </div>

              <div className="grid lg:grid-cols-2 gap-6">
                <Card className="space-y-3">
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="text-xs uppercase tracking-wide text-indigo-600">Energy Calendar preview</p>
                      <h3 className="text-lg font-bold">One-time sample output</h3>
                    </div>
                    <Badge>{freeOutputs.energyUsed ? 'Used' : 'Free'}</Badge>
                  </div>
                  <div className="grid sm:grid-cols-3 gap-3 text-sm">
                    <input
                      type="date"
                      value={landingEnergyDate}
                      onChange={(e) => setLandingEnergyDate(e.target.value)}
                      className="px-3 py-2 rounded-xl bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                    />
                    <Button onClick={runLandingEnergy} className="sm:col-span-2">Get my window</Button>
                  </div>
                  {landingEnergyResult ? (
                    landingEnergyResult.locked ? (
                      <p className="text-sm text-amber-500">{landingEnergyResult.note}</p>
                    ) : (
                      <div className="p-3 rounded-xl bg-indigo-50 dark:bg-indigo-950/40 text-sm">
                        <div className="font-semibold">{landingEnergyResult.label}</div>
                        <p className="opacity-80">{landingEnergyResult.note}</p>
                        <p className="mt-2 text-xs opacity-70">Enjoyed it? Start Basic to unlock daily timing.</p>
                      </div>
                    )
                  ) : (
                    <p className="text-xs opacity-70">Pick a date to see a sample timing cue.</p>
                  )}
                </Card>

                <Card className="space-y-3">
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="text-xs uppercase tracking-wide text-indigo-600">Compatibility (Demo)</p>
                      <h3 className="text-lg font-bold">Try one match for free</h3>
                    </div>
                    <Badge>{freeOutputs.compatUsed ? 'Used' : 'Free'}</Badge>
                  </div>
                  <div className="grid sm:grid-cols-3 gap-3 text-sm">
                    <input
                      value={landingCompatInput.brand}
                      onChange={(e) => setLandingCompatInput({ ...landingCompatInput, brand: e.target.value })}
                      placeholder="Brand or person"
                      className="px-3 py-2 rounded-xl bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                    />
                    <input
                      type="date"
                      value={landingCompatInput.date}
                      onChange={(e) => setLandingCompatInput({ ...landingCompatInput, date: e.target.value })}
                      className="px-3 py-2 rounded-xl bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                    />
                    <Button onClick={runLandingCompat}>Check</Button>
                  </div>
                  {landingCompatResult ? (
                    landingCompatResult.locked ? (
                      <p className="text-sm text-amber-500">{landingCompatResult.message}</p>
                    ) : (
                      <div className="p-3 rounded-xl bg-indigo-50 dark:bg-indigo-950/40 text-sm">
                        <div className="text-3xl font-black text-indigo-700 dark:text-indigo-200">{landingCompatResult.score}</div>
                        <p className="font-semibold">{landingCompatResult.tag}</p>
                        <p className="text-xs opacity-70 mt-1">Upgrade to Astra+ for full compatibility reports.</p>
                      </div>
                    )
                  ) : (
                    <p className="text-xs opacity-70">Enter any brand to preview a sample match result.</p>
                  )}
                </Card>
              </div>

              <div className="grid md:grid-cols-3 gap-4 text-sm">
                <Card>
                  <div className="text-xs uppercase tracking-wide opacity-70">People & Brand Match</div>
                  <p className="font-semibold mt-1">Check chemistry and communication patterns.</p>
                  <p className="text-xs opacity-70 mt-1">See how your energy lines up with partners, teams, cities, and 22,000+ brands.</p>
                </Card>
                <Card>
                  <div className="text-xs uppercase tracking-wide opacity-70">AstraChats (AI)</div>
                  <p className="font-semibold mt-1">Ask timing and compatibility questions.</p>
                  <p className="text-xs opacity-70 mt-1">Astra-backed answers with numerology + astrology combined.</p>
                </Card>
                <Card>
                  <div className="text-xs uppercase tracking-wide opacity-70">Simple plans</div>
                  <p className="font-semibold mt-1">Starter • Astra+ • AstraChats</p>
                  <p className="text-xs opacity-70 mt-1">Cancel anytime. All payments build toward Lifetime status.</p>
                </Card>
              </div>

              <section id="signup" className="grid lg:grid-cols-2 gap-6 text-sm">
                <Card className="space-y-3">
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="text-xs uppercase tracking-wide text-indigo-600">Start Basics — $2.96/mo</p>
                      <h3 className="text-xl font-bold">Sign up for Astra (Google Sheets capture)</h3>
                      <p className="text-xs opacity-70">We collect your details and push them directly into the shared Google Sheet.</p>
                    </div>
                    <Badge>{leadStatus === 'submitted' ? 'Synced' : 'Secure'}</Badge>
                  </div>
                  <form className="grid sm:grid-cols-2 gap-3" onSubmit={handleLeadSubmit}>
                    <div className="space-y-1 sm:col-span-2">
                      <label className="text-xs opacity-70">Full name</label>
                      <input
                        required
                        value={leadForm.fullName}
                        onChange={(e) => setLeadForm({ ...leadForm, fullName: e.target.value })}
                        className="w-full px-3 py-2 rounded-xl bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                        placeholder="Alex Driver"
                      />
                    </div>
                    <div className="space-y-1">
                      <label className="text-xs opacity-70">Email</label>
                      <input
                        required
                        type="email"
                        value={leadForm.email}
                        onChange={(e) => setLeadForm({ ...leadForm, email: e.target.value })}
                        className="w-full px-3 py-2 rounded-xl bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                        placeholder="you@example.com"
                      />
                    </div>
                    <div className="space-y-1">
                      <label className="text-xs opacity-70">Phone</label>
                      <input
                        required
                        value={leadForm.phone}
                        onChange={(e) => setLeadForm({ ...leadForm, phone: e.target.value })}
                        className="w-full px-3 py-2 rounded-xl bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                        placeholder="(555) 123-4567"
                      />
                    </div>
                    <div className="space-y-1 sm:col-span-2">
                      <label className="text-xs opacity-70">Reason for signup</label>
                      <select
                        required
                        value={leadForm.reason}
                        onChange={(e) => setLeadForm({ ...leadForm, reason: e.target.value })}
                        className="w-full px-3 py-2 rounded-xl bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                      >
                        <option value="">Pick a feature</option>
                        <option>Energy Calendar windows</option>
                        <option>Compatibility checks</option>
                        <option>Life Path reading</option>
                        <option>AstraChats AI</option>
                        <option>Pricing & plan comparison</option>
                        <option>Sample output</option>
                      </select>
                    </div>
                    <div className="sm:col-span-2 flex items-center gap-3 flex-wrap">
                      <Button type="submit" disabled={leadStatus === 'submitting'}>
                        {leadStatus === 'submitting' ? 'Sending to Google Sheet…' : 'Submit & sync'}
                      </Button>
                      <a href="#login" className="text-sm font-semibold">Already a member? Sign in</a>
                      {leadStatus === 'submitted' ? (
                        <span className="text-emerald-600 text-xs">Captured to Google Sheet</span>
                      ) : null}
                      {leadStatus === 'failed' ? (
                        <span className="text-amber-500 text-xs">{leadError}</span>
                      ) : null}
                    </div>
                  </form>
                </Card>

                <Card id="login" className="space-y-3">
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="text-xs uppercase tracking-wide text-indigo-600">Existing members</p>
                      <h3 className="text-xl font-bold">Sign in to Astra</h3>
                      <p className="text-xs opacity-70">Use your account email to sync a quick login event to the Google Sheet.</p>
                    </div>
                    <Badge>Optional</Badge>
                  </div>
                  <form className="space-y-2" onSubmit={handleAccountLogin}>
                    <div className="space-y-1">
                      <label className="text-xs opacity-70">Astra account email</label>
                      <input
                        required
                        type="email"
                        value={accountLogin.email}
                        onChange={(e) => setAccountLogin({ ...accountLogin, email: e.target.value })}
                        className="w-full px-3 py-2 rounded-xl bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                        placeholder="you@astra.email"
                      />
                    </div>
                    <label className="flex items-center gap-2 text-xs">
                      <input
                        type="checkbox"
                        checked={accountLogin.consent}
                        onChange={(e) => setAccountLogin({ ...accountLogin, consent: e.target.checked })}
                        className="h-4 w-4 rounded border border-black/20"
                      />
                      Share this login event to the Google Sheet for your account record.
                    </label>
                    <div className="flex items-center gap-3">
                      <Button type="submit" disabled={loginStatus === 'submitting'}>
                        {loginStatus === 'submitting' ? 'Syncing…' : 'Log in'}
                      </Button>
                      {loginStatus === 'submitted' ? (
                        <span className="text-emerald-600 text-xs">Synced to sheet</span>
                      ) : null}
                      {loginStatus === 'failed' ? (
                        <span className="text-amber-500 text-xs">{loginError}</span>
                      ) : null}
                    </div>
                    <p className="text-xs opacity-70">We only store what you share for this preview experience.</p>
                  </form>
                </Card>
              </section>
            </section>

            {/* Landing snippet 2 — Life Path experience */}
            <section id="life-path" className="max-w-6xl mx-auto px-4 pb-10 space-y-8">
              <div className="grid lg:grid-cols-2 gap-8 items-start">
                <div className="space-y-4">
                  <div className="flex items-center gap-2 text-sm font-semibold text-indigo-600">
                    <span className="text-lg">✨</span>
                    <span>Life Path • Self-knowledge</span>
                  </div>
                  <h2 className="text-3xl md:text-4xl font-black leading-tight">Get your Life Path reading.</h2>
                  <p className="text-lg text-zinc-700 dark:text-zinc-200">
                    Astra blends numerology and astrology to unlock your high-probability windows for decisions, relationships, and timing.
                  </p>
                  <div className="flex flex-wrap gap-3">
                    <Button onClick={runLandingLifePath}>Try a free Life Path reading</Button>
                    <Button variant="ghost" className="text-sm" onClick={() => document.getElementById('plans')?.scrollIntoView({ behavior: 'smooth' })}>
                      Start Basics — $2.96/mo
                    </Button>
                  </div>
                  <p className="text-sm opacity-70">Not a horoscope — it’s decision timing and compatibility. Cancel anytime.</p>
                  <div className="flex items-center gap-4 text-sm">
                    <div className="font-semibold">⭐️ 4.8</div>
                    <span className="opacity-70">3,000+ reviews</span>
                    <span className="opacity-70">200,000+ users</span>
                  </div>
                  <div className="flex flex-wrap gap-3 text-sm">
                    <Button variant="ghost" className="text-sm" onClick={() => document.getElementById('life-path-tool')?.scrollIntoView({ behavior: 'smooth' })}>Try the tool</Button>
                    <Button variant="ghost" className="text-sm" onClick={() => document.getElementById('why-astra')?.scrollIntoView({ behavior: 'smooth' })}>How it works</Button>
                    <Button variant="ghost" className="text-sm" onClick={() => document.getElementById('plans')?.scrollIntoView({ behavior: 'smooth' })}>Plans</Button>
                    <Button variant="ghost" className="text-sm" onClick={() => document.getElementById('plans')?.scrollIntoView({ behavior: 'smooth' })}>See all plans</Button>
                  </div>
                </div>
                <Card id="life-path-tool" className="space-y-3 border-indigo-100 dark:border-indigo-900/40">
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="text-xs uppercase tracking-wide text-indigo-600">Free sample — 1 reading</p>
                      <h3 className="text-xl font-bold">Life Path</h3>
                    </div>
                    <Badge>{freeOutputs.lifeUsed ? 'Used' : 'Free'}</Badge>
                  </div>
                  <label className="text-sm font-semibold">Your birth date</label>
                  <input
                    type="date"
                    value={landingLifeDate}
                    onChange={(e) => setLandingLifeDate(e.target.value)}
                    className="w-full px-3 py-2 rounded-xl bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                  />
                  <Button onClick={runLandingLifePath} className="w-full">Get my Life Path</Button>
                  {landingLifeResult ? (
                    landingLifeResult.locked ? (
                      <p className="text-sm text-amber-500">{landingLifeResult.message}</p>
                    ) : landingLifeResult.error ? (
                      <p className="text-sm text-amber-500">{landingLifeResult.error}</p>
                    ) : (
                      <div className="p-3 rounded-xl bg-indigo-50 dark:bg-indigo-950/40 text-sm space-y-1">
                        <div className="text-4xl font-black text-indigo-700 dark:text-indigo-200">Life Path {landingLifeResult.path}</div>
                        <p className="font-semibold">{landingLifeResult.blurb}</p>
                        <p className="text-xs opacity-70">Demo is illustrative and not a guarantee of outcomes.</p>
                      </div>
                    )
                  ) : (
                    <p className="text-xs opacity-70">One free reading to test the tool. Upgrade to keep exploring.</p>
                  )}
                </Card>
              </div>

              <Card id="why-astra" className="space-y-3">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-xs uppercase tracking-wide text-indigo-600">Why Astra works</p>
                    <h3 className="text-lg font-bold">Astra blends numerology + astrology (Astra methodology)</h3>
                  </div>
                  <Badge>Guidance, not guarantees</Badge>
                </div>
                <p className="text-sm opacity-80">Think of it as normalizing both systems with structured data so you can plan with confidence.</p>
                <div className="grid sm:grid-cols-2 gap-3 text-sm">
                  <div className="p-3 rounded-xl bg-white/80 dark:bg-zinc-800/70 border border-black/5 dark:border-white/10">
                    <div className="font-semibold">Timing calendar</div>
                    <p className="text-xs opacity-70">Daily favorability, best moves, and alerts.</p>
                  </div>
                  <div className="p-3 rounded-xl bg-white/80 dark:bg-zinc-800/70 border border-black/5 dark:border-white/10">
                    <div className="font-semibold">Life Path</div>
                    <p className="text-xs opacity-70">Decode your imprint and align decisions.</p>
                  </div>
                  <div className="p-3 rounded-xl bg-white/80 dark:bg-zinc-800/70 border border-black/5 dark:border-white/10">
                    <div className="font-semibold">People & brand compatibility</div>
                    <p className="text-xs opacity-70">Match with partners, friends, teams, and 22,000+ brands.</p>
                  </div>
                  <div className="p-3 rounded-xl bg-white/80 dark:bg-zinc-800/70 border border-black/5 dark:border-white/10">
                    <div className="font-semibold">AstraChats (AI)</div>
                    <p className="text-xs opacity-70">Ask timing + compatibility questions in plain English.</p>
                  </div>
                </div>
              </Card>

              <section id="plans" className="space-y-4">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-xs uppercase tracking-wide text-indigo-600">Start with Basics (upgrade anytime)</p>
                    <h3 className="text-xl font-bold">Simple plans. Cancel anytime.</h3>
                  </div>
                  <Button
                    variant="ghost"
                    className="text-sm"
                    onClick={() => document.getElementById('plans')?.scrollIntoView({ behavior: 'smooth' })}
                  >
                    See all plans
                  </Button>
                </div>
                <div className="grid md:grid-cols-3 gap-4 text-sm">
                  <Card className="space-y-2">
                    <div className="flex items-center justify-between">
                      <h4 className="font-bold text-lg">The Basics</h4>
                      <Badge>$2.96 / month</Badge>
                    </div>
                    <ul className="list-disc pl-4 space-y-1">
                      <li>Life Path readings</li>
                      <li>Energy Calendar (essentials)</li>
                      <li>Search 1,000+ popular Astras</li>
                    </ul>
                    <p className="text-xs opacity-70">Upgrade to Astra+ anytime—payments count toward Lifetime.</p>
                    <Button className="w-full" onClick={() => document.getElementById('signup')?.scrollIntoView({ behavior: 'smooth' })}>
                      Start Basics
                    </Button>
                  </Card>

                  <Card className="space-y-2">
                    <div className="flex items-center justify-between">
                      <h4 className="font-bold text-lg">Astrachats</h4>
                      <Badge>$8 / month</Badge>
                    </div>
                    <ul className="list-disc pl-4 space-y-1">
                      <li>Includes all features from The Basics</li>
                      <li>Instant chat for energy, compatibility, & decoding</li>
                      <li>Built on verified Astra data, updated weekly</li>
                    </ul>
                    <p className="text-xs opacity-70">Great for quick insights; upgrade to Astra+ for full reports.</p>
                    <Button
                      className="w-full"
                      variant="ghost"
                      onClick={() => document.getElementById('signup')?.scrollIntoView({ behavior: 'smooth' })}
                    >
                      Start Astrachats
                    </Button>
                  </Card>

                  <Card className="space-y-2 border-2 border-indigo-200 dark:border-indigo-800">
                    <div className="flex items-center justify-between">
                      <h4 className="font-bold text-lg">Astra+</h4>
                      <Badge>$17 / month</Badge>
                    </div>
                    <ul className="list-disc pl-4 space-y-1">
                      <li>Unlock everything: Search, Chats, Compatibility Filters</li>
                      <li>26,000+ Astras with daily insights for timing</li>
                      <li>Access exclusive research from Gary Grinberg & team</li>
                    </ul>
                    <p className="text-xs opacity-70">Every payment builds toward Lifetime — own your progress.</p>
                    <Button
                      className="w-full"
                      variant="success"
                      onClick={() => document.getElementById('signup')?.scrollIntoView({ behavior: 'smooth' })}
                    >
                      Start Astra+
                    </Button>
                  </Card>
                </div>
              </section>

              <Card id="faq" className="space-y-3">
                <div className="flex items-center justify-between">
                  <h3 className="text-xl font-bold">FAQ</h3>
                  <Button variant="ghost" className="text-sm">Get the app</Button>
                </div>
                <div className="space-y-3 text-sm">
                  <details className="p-3 rounded-xl bg-white/80 dark:bg-zinc-800/70 border border-black/5 dark:border-white/10" open>
                    <summary className="font-semibold cursor-pointer">Is Astra a horoscope app?</summary>
                    <p className="opacity-80 mt-1">Not really. Astra focuses on decision timing and compatibility—when to act and with whom—not daily zodiac blurbs.</p>
                  </details>
                  <details className="p-3 rounded-xl bg-white/80 dark:bg-zinc-800/70 border border-black/5 dark:border-white/10">
                    <summary className="font-semibold cursor-pointer">Do I need my exact birth time?</summary>
                    <p className="opacity-80 mt-1">No. You can start without it. Providing birth time unlocks more precise timing.</p>
                  </details>
                  <details className="p-3 rounded-xl bg-white/80 dark:bg-zinc-800/70 border border-black/5 dark:border-white/10">
                    <summary className="font-semibold cursor-pointer">Can I cancel anytime?</summary>
                    <p className="opacity-80 mt-1">Yes. Manage your subscription through your device’s app store settings.</p>
                  </details>
                  <details className="p-3 rounded-xl bg-white/80 dark:bg-zinc-800/70 border border-black/5 dark:border-white/10">
                    <summary className="font-semibold cursor-pointer">Does Astra guarantee outcomes?</summary>
                    <p className="opacity-80 mt-1">No. Astra offers guidance to help you plan. Outcomes depend on many factors. Use for informational/entertainment purposes.</p>
                  </details>
                </div>
                <div className="flex flex-wrap gap-3 text-sm items-center">
                  <Button className="text-sm">Get the app</Button>
                  <p className="opacity-70">Unlock deeper insights, full reports, and more tools.</p>
                </div>
              </Card>
            </section>

                  
      
            <footer className="max-w-6xl mx-auto px-4 pb-10 text-xs opacity-70">
              Built for this preview: Core loop (check‑in → brief → mini‑game → rewards), season pass feel, Houses, daily quests, wallet, theme toggle. No tracking; all state is in‑memory.
            </footer>
          </div>
        );
      }
      
      function CheckItem({ label, value, setValue }){
        const Opt = ({ v, emoji, name }) => (
          <button onClick={() => setValue(v)} className={`flex-1 px-3 py-2 rounded-xl border text-sm transition ${value===v? 'bg-indigo-600 text-white border-indigo-600' : 'bg-white/60 dark:bg-zinc-800/60 border-black/10 dark:border-white/10 hover:bg-black/5 dark:hover:bg-white/5'}`}>
            <div className="text-lg">{emoji}</div>
            <div className="mt-1">{name}</div>
          </button>
        );
        return (
          <div className="space-y-2">
            <div className="text-sm font-semibold">{label}</div>
            <div className="flex gap-2">
              <Opt v="low" emoji="🌥️" name="Low" />
              <Opt v="ok" emoji="⛅" name="OK" />
              <Opt v="high" emoji="☀️" name="High" />
            </div>
          </div>
        );
      }
      const rootEl = document.getElementById("root");
      ReactDOM.createRoot(rootEl).render(
        <ErrorBoundary>
          <AstraPlayDemo />
        </ErrorBoundary>
      );
    </script>
  </body>
</html>
