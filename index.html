<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Astra Play Demo</title>
    <!-- Tailwind via CDN for quick styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM from unpkg CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel standalone to transpile JSX in the browser -->
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="dark:bg-zinc-950 dark:text-zinc-100">
    <div id="root"></div>
      <script type="text/babel">
              // Code imported from astra_play_gamified_astrology_demo_preview.jsx

        const { useState, useEffect, useMemo } = React;

        // --- Lightweight UI helpers (no external deps) ---
      const Card = ({ children, className = "" }) => (
        <div className={`rounded-2xl shadow-lg border border-black/5 bg-white/80 dark:bg-zinc-900/80 backdrop-blur p-5 ${className}`}>{children}</div>
      );
      const Button = ({ children, onClick, variant = "primary", className = "", disabled = false }) => {
        const base = "px-4 py-2 rounded-xl font-semibold transition active:scale-[.98] disabled:opacity-50 disabled:cursor-not-allowed";
        const styles = {
          primary: "bg-indigo-600 hover:bg-indigo-700 text-white",
          ghost: "bg-transparent hover:bg-black/5 dark:hover:bg-white/5 border border-black/10 dark:border-white/10",
          success: "bg-emerald-600 hover:bg-emerald-700 text-white",
        };
        return (
          <button onClick={onClick} className={`${base} ${styles[variant]} ${className}`} disabled={disabled}>
            {children}
          </button>
        );
      };
      const Badge = ({ children }) => (
        <span className="inline-flex items-center gap-1 text-xs font-medium px-2 py-1 rounded-full bg-indigo-100 text-indigo-700 dark:bg-indigo-900 dark:text-indigo-200">{children}</span>
      );
      
      // --- Fake content seeds ---
      const HOUSES = [
        "Arcanum",
        "Beacon",
        "Catalyst",
        "Dawn",
        "Ember",
        "Flux",
        "Glyph",
        "Harbor",
        "Ion",
        "Jade",
        "Kindred",
        "Lumina",
      ];
      
      const DAILY_SCENARIOS = [
        {
          id: "work_pitch",
          title: "Your morning has a bold edge. Pitch now or prep more?",
          a: "Pitch now (ride momentum)",
          b: "Prep more (send tomorrow)",
          tip: "Mars-Mercury vibes favor decisive starts; keep it concise.",
        },
        {
          id: "date_text",
          title: "Thinking about texting someone new‚Äîgo playful or direct?",
          a: "Playful opener",
          b: "Direct invite",
          tip: "Venus in a curious angle rewards warmth + clarity in two beats.",
        },
        {
          id: "fitness",
          title: "Energy window appears late afternoon‚Äîlift or long walk?",
          a: "Short, heavy lift",
          b: "45-min walk + stretch",
          tip: "Pick what you‚Äôll celebrate finishing. Consistency > intensity.",
        },
      ];

      const LIFE_PATH_BLURBS = {
        1: "Pioneer energy‚Äîleadership, self-starter vibes, and fresh momentum.",
        2: "Diplomat energy‚Äîcollaboration, intuition, and harmonizing groups.",
        3: "Creator energy‚Äîcommunication, play, and shipping ideas quickly.",
        4: "Builder energy‚Äîsystems, discipline, and turning plans into reality.",
        5: "Explorer energy‚Äîadaptability, travel, and learning by doing.",
        6: "Steward energy‚Äîcare, hosting, and steadying the people around you.",
        7: "Analyst energy‚Äîresearch, reflection, and spotting the signal in noise.",
        8: "Strategist energy‚Äîambition, influence, and resourcing the mission.",
        9: "Humanitarian energy‚Äîbig-picture service and closing loops with grace.",
        11: "Visionary master number‚Äîintuition, inspiration, and elevating the room.",
        22: "Architect master number‚Äîprecision, long-view planning, and bold builds.",
      };

      const ENERGY_WINDOWS = [
        {
          day: "Today",
          focus: "Deep Work",
          window: "10:00‚Äì12:00",
          cue: "Ship 1 thing while momentum is high.",
        },
        {
          day: "Tomorrow",
          focus: "Connection",
          window: "14:00‚Äì16:00",
          cue: "Send 2 outreach notes or schedule a check-in.",
        },
        {
          day: "Sat",
          focus: "Recharge",
          window: "09:30‚Äì11:00",
          cue: "Low stakes movement + reset your calendar.",
        },
      ];

      // --- Utilities ---
      const clamp = (n, min, max) => Math.max(min, Math.min(max, n));
      const getAstroSign = (dateStr) => {
        const date = new Date(dateStr);
        if (Number.isNaN(date.getTime())) return null;
        const month = date.getUTCMonth() + 1;
        const day = date.getUTCDate();
        const boundaries = [
          [1, 20, "Capricorn"],
          [2, 19, "Aquarius"],
          [3, 21, "Pisces"],
          [4, 20, "Aries"],
          [5, 21, "Taurus"],
          [6, 21, "Gemini"],
          [7, 23, "Cancer"],
          [8, 23, "Leo"],
          [9, 23, "Virgo"],
          [10, 23, "Libra"],
          [11, 22, "Scorpio"],
          [12, 22, "Sagittarius"],
          [12, 32, "Capricorn"],
        ];
        const match = boundaries.find(([, cutoff, sign], idx) => {
          const currentMonth = idx + 1;
          return (month === currentMonth && day < cutoff) || (month === currentMonth + 1 && day < boundaries[idx + 1]?.[1]);
        });
        return match ? match[2] : "Sagittarius";
      };
      
      const getChineseZodiac = (dateStr) => {
        const date = new Date(dateStr);
        if (Number.isNaN(date.getTime())) return null;
        const animals = [
          "Rat",
          "Ox",
          "Tiger",
          "Rabbit",
          "Dragon",
          "Snake",
          "Horse",
          "Goat",
          "Monkey",
          "Rooster",
          "Dog",
          "Pig",
        ];
        const year = date.getUTCFullYear();
        return animals[(year - 4) % 12];
      };
      
      const formatMonthDay = (date) =>
        date.toLocaleDateString("en-US", { month: "short", day: "numeric" });
      
      const generateCompatDates = (dateStr) => {
        const baseDate = new Date(dateStr);
        if (Number.isNaN(baseDate.getTime())) return null;
        const offsets = [5, 13, 21, 34, 55];
        const builds = (shift) => formatMonthDay(new Date(baseDate.getTime() + shift * 24 * 60 * 60 * 1000));
        return {
          love: [builds(offsets[1]), builds(offsets[3]), builds(offsets[0])],
          business: [builds(offsets[2]), builds(offsets[4]), builds(offsets[0])],
          friend: [builds(offsets[0]), builds(offsets[1]), builds(offsets[2])],
        };
      };
      
      function AstraPlayDemo() {
        // Theme
        const [dark, setDark] = useState(true);
        useEffect(() => {
          document.documentElement.classList.toggle('dark', dark);
        }, [dark]);
      
        // Session state
        const [level, setLevel] = useState(3);
        const [xp, setXp] = useState(45); // out of 100
        const [house, setHouse] = useState(null);
        const [seasonDaysLeft] = useState(20);
        const [stars, setStars] = useState(12); // soft currency
        const [profile, setProfile] = useState({
          name: "",
          email: "",
          phone: "",
          birthdate: "",
          location: "",
        });
        const [profileInsights, setProfileInsights] = useState(null);
        const [showOnboarding, setShowOnboarding] = useState(true);
        const [friendTree, setFriendTree] = useState([]);
        const [newFriend, setNewFriend] = useState({ name: "", birthday: "", role: "" });
      
        // Check-in state
        const [mood, setMood] = useState(null); // low/ok/high
        const [focus, setFocus] = useState(null);
        const [connection, setConnection] = useState(null);
        const checkinComplete = Boolean(mood && focus && connection);
        const [checkinAwarded, setCheckinAwarded] = useState(false);

        // Tools + calculators
        const [birthDate, setBirthDate] = useState("");
        const [lifePathNumber, setLifePathNumber] = useState(null);
        const [lifePathAwarded, setLifePathAwarded] = useState(false);
        const [compatA, setCompatA] = useState({ name: "You", date: "" });
        const [compatB, setCompatB] = useState({ name: "Partner", date: "" });
        const [compatResult, setCompatResult] = useState(null);
        const [compatAwarded, setCompatAwarded] = useState(false);

        // Mini-game: Decision Duel
        const scenario = useMemo(() => DAILY_SCENARIOS[Math.floor(Math.random()*DAILY_SCENARIOS.length)], []);
        const [choice, setChoice] = useState(null);
        const [duelDone, setDuelDone] = useState(false);
      
        // Quests
        const [quests, setQuests] = useState([
          { id: 'q1', label: 'Complete daily check‚Äëin', done: false, xp: 20 },
          { id: 'q2', label: 'Read your guidance brief', done: false, xp: 15 },
          { id: 'q3', label: 'Play 1 mini‚Äëgame', done: false, xp: 25 },
          { id: 'q4', label: 'Invite 1 person to your tree', done: false, xp: 15 },
          { id: 'q5', label: 'Run the Energy Calendar for today', done: false, xp: 10 },
        ]);
      
        // Derived guidance stub
        const guidance = useMemo(() => {
          const tags = [];
          if (mood === "high") tags.push("Ride confidence early.");
          if (mood === "low") tags.push("Set a tiny win before noon.");
          if (focus === "high") tags.push("Deep work block: 45‚Äì60 min.");
          if (connection === "high") tags.push("Send a 2‚Äëline check‚Äëin to a friend.");
          if (tags.length === 0)
            tags.push("Light touch today. One meaningful action > many half‚Äëstarts.");
          return tags.slice(0, 3);
        }, [mood, focus, connection]);

        // Helpers for calculators
        const reduceNumber = (value) => {
          let sum = value;
          while (sum > 22 || (sum > 9 && sum !== 11 && sum !== 22)) {
            sum = sum
              .toString()
              .split("")
              .reduce((acc, digit) => acc + parseInt(digit, 10), 0);
          }
          return sum;
        };

        const computeLifePath = (dateStr) => {
          const digits = dateStr.replace(/\D/g, "");
          if (digits.length < 8) return null;
          const total = digits.split("").reduce((acc, d) => acc + parseInt(d, 10), 0);
          return reduceNumber(total);
        };

        const computeCompatibility = (a, b) => {
          const names = `${a.name}${b.name}`.toLowerCase();
          const birthdays = `${a.date}${b.date}`.replace(/\D/g, "");
          if (birthdays.length < 8) return null;
          const nameScore = names
            .split("")
            .reduce((acc, ch) => acc + ch.charCodeAt(0), 0);
          const dateScore = birthdays
            .split("")
            .reduce((acc, d) => acc + parseInt(d, 10), 0);
          const base = reduceNumber((nameScore + dateScore) % 99);
          const normalized = clamp(Math.round((base / 22) * 100), 1, 99);
          const vibe =
            normalized >= 80
              ? "High sync‚Äîgreenlight shared moves."
              : normalized >= 60
              ? "Supportive‚Äîalign on timing and clarify roles."
              : normalized >= 40
              ? "Neutral‚Äîstart small and iterate together."
              : "Edgy‚Äîset guardrails and keep it light.";
          const anchor = normalized >= 60 ? "Double down on shared wins." : "Keep scope small & playful.";
          return { score: normalized, vibe, anchor };
        };

        // Functions
        const grantXP = (amount) => {
          setXp((prevXp) => {
            let total = prevXp + amount;
            let levelsEarned = 0;
      
            while (total >= 100) {
              total -= 100;
              levelsEarned += 1;
            }
      
            if (levelsEarned) {
              setLevel((lvl) => lvl + levelsEarned);
              setStars((curr) => curr + levelsEarned); // small bonus per level
            }
      
            return clamp(total, 0, 100);
          });
        };
      
        const completeQuest = (id) => {
          setQuests((prev) => prev.map(q => q.id === id ? { ...q, done: true } : q));
        };
      
        const handleCheckin = () => {
          if (!checkinComplete || checkinAwarded) return;
          grantXP(25);
          completeQuest('q1');
          setCheckinAwarded(true);
        };

        const handleLifePathChange = (value) => {
          setBirthDate(value);
          const lp = computeLifePath(value);
          setLifePathNumber(lp);
          if (lp && !lifePathAwarded) {
            grantXP(10);
            setLifePathAwarded(true);
          }
        };

        const handleCompat = () => {
          const result = computeCompatibility(compatA, compatB);
          setCompatResult(result);
          if (result && !compatAwarded) {
            grantXP(10);
            setCompatAwarded(true);
          }
        };

        const handleDuel = (pick) => {
          if (duelDone) return;
          setChoice(pick);
          // lightweight outcome logic
          const favorA = (focus === 'high' || mood === 'high');
          const pickedA = pick === 'a';
          const win = favorA ? pickedA : !pickedA;
          setTimeout(() => {
            setDuelDone(true);
            grantXP(win ? 30 : 10);
            completeQuest('q3');
          }, 500);
        };

        const guidanceViewed = () => completeQuest("q2");

        // Featured tool helpers
        const evaluateEnergyDate = (dateStr) => {
          if (!dateStr) return null;
          const day = new Date(dateStr).getDay();
          const weekdayBonus = [1, 2, 3].includes(day);
          const weekend = day === 0 || day === 6;
          const tone = weekend
            ? "Recharge day ‚Äî lighten meetings and schedule creative blocks."
            : weekdayBonus
            ? "Green window ‚Äî high alignment for outreach and launches."
            : "Steady day ‚Äî align 1:1s and prep decks.";
          return {
            label: weekend ? "Recharge" : weekdayBonus ? "High sync" : "Balanced",
            note: tone,
          };
        };

        const evaluateCueChats = (question) => {
          if (!question.trim()) return null;
          const nudge = question.toLowerCase().includes("launch")
            ? "Pick a Tuesday/Wednesday window; ship early in the week."
            : question.toLowerCase().includes("relationship")
            ? "Pair conversations with calm, clear time blocks."
            : "Anchor the decision to one small action within 48 hours.";
          return `CueChats: ${nudge}`;
        };

        const evaluateBrandDate = (name, dateStr) => {
          if (!name.trim() || !dateStr) return null;
          const digits = dateStr.replace(/\D/g, "");
          const base = digits
            .split("")
            .reduce((acc, d) => acc + parseInt(d, 10), 0);
          const score = clamp(Math.round((reduceNumber(base) / 22) * 100), 5, 99);
          const tag = score >= 75 ? "Launch-forward" : score >= 55 ? "Balanced" : "Iterate";
          return { score, tag };
        };

        // House leaderboard (demo)
        const leaderboard = useMemo(() => {
          const base = HOUSES.map((h) => ({ name: h, points: Math.floor(Math.random() * 900 + 100) }));
          if (house) {
            const favored = base.find((x) => x.name === house);
            if (favored) favored.points += 120; // tiny bias to feel good
          }
          return base.sort((a, b) => b.points - a.points).slice(0, 5);
        }, [house]);
      
        // Copy helpers
        const copyChallenge = async () => {
          try {
            await navigator.clipboard.writeText('Join my Decision Duel on Astra Play ‚Üí (demo link)');
            alert('Challenge link copied!');
          } catch {
            alert('Copied placeholder challenge to your clipboard.');
          }
        };
      
        return (
          <div className="min-h-screen bg-gradient-to-b from-indigo-50 to-white dark:from-zinc-950 dark:to-zinc-900 text-zinc-900 dark:text-zinc-100">
            {/* Nav */}
            <header className="sticky top-0 z-30 backdrop-blur bg-white/60 dark:bg-zinc-950/60 border-b border-black/5 dark:border-white/10">
              <div className="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <div className="h-9 w-9 rounded-xl bg-indigo-600 grid place-items-center text-white font-black">A</div>
                  <div>
                    <div className="font-extrabold tracking-tight text-lg">Astra Play</div>
                    <div className="text-xs opacity-70">
                      {profile.name
                        ? `${profile.name} ‚Ä¢ ${profileInsights?.astroSign || 'Set your sign'} ‚Ä¢ LP ${lifePathNumber || '?'}`
                        : 'Daily cosmic game ‚Ä¢ Season: Sagittarius'}
                    </div>
                  </div>
                </div>
                <div className="flex items-center gap-3">
                  <Badge>Lvl {level}</Badge>
                  <div className="w-40 h-3 bg-black/5 dark:bg-white/10 rounded-full overflow-hidden">
                    <div className="h-full bg-indigo-600" style={{ width: `${xp}%`}} />
                  </div>
                  <span className="text-xs opacity-80">{xp}/100 XP</span>
                  <Button variant="ghost" onClick={() => setDark(!dark)}>{dark ? 'Light' : 'Dark'} mode</Button>
                </div>
              </div>
            </header>
      
                  <main className="max-w-6xl mx-auto px-4 py-6 grid lg:grid-cols-3 gap-6">
                    {/* Left column */}
                    <section className="lg:col-span-2 space-y-6">
                      {/* Onboarding + personalization */}
                      <Card className="relative overflow-hidden border-indigo-100 dark:border-indigo-900/40">
                        <div className="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
                          <div>
                            <p className="text-xs uppercase tracking-wide text-indigo-600">Welcome</p>
                            <h2 className="text-xl font-bold">Tune Astra to you</h2>
                            <p className="text-sm opacity-80">
                              Set your details once to unlock a personalized home, daily check-ins, and social tree suggestions.
                            </p>
                          </div>
                          <Badge>{showOnboarding ? "New" : "Personalized"}</Badge>
                        </div>
                        <div className="mt-4 grid sm:grid-cols-2 lg:grid-cols-3 gap-3 text-sm">
                          <div className="space-y-1">
                            <label className="text-xs opacity-70">Name</label>
                            <input
                              value={profile.name}
                              onChange={(e) => setProfile({ ...profile, name: e.target.value })}
                              className="w-full px-3 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                              placeholder="Your name"
                            />
                          </div>
                          <div className="space-y-1">
                            <label className="text-xs opacity-70">Email</label>
                            <input
                              value={profile.email}
                              onChange={(e) => setProfile({ ...profile, email: e.target.value })}
                              className="w-full px-3 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                              placeholder="you@email.com"
                              type="email"
                            />
                          </div>
                          <div className="space-y-1">
                            <label className="text-xs opacity-70">Phone</label>
                            <input
                              value={profile.phone}
                              onChange={(e) => setProfile({ ...profile, phone: e.target.value })}
                              className="w-full px-3 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                              placeholder="(555)"
                              type="tel"
                            />
                          </div>
                          <div className="space-y-1">
                            <label className="text-xs opacity-70">Birth date</label>
                            <input
                              value={profile.birthdate}
                              onChange={(e) => setProfile({ ...profile, birthdate: e.target.value })}
                              className="w-full px-3 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                              type="date"
                            />
                          </div>
                          <div className="space-y-1">
                            <label className="text-xs opacity-70">Location</label>
                            <input
                              value={profile.location}
                              onChange={(e) => setProfile({ ...profile, location: e.target.value })}
                              className="w-full px-3 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                              placeholder="City / TZ"
                            />
                          </div>
                          <div className="space-y-1 flex items-end">
                            <Button onClick={personalizeProfile} className="w-full">Generate my cosmic brief</Button>
                          </div>
                        </div>
                        {!showOnboarding && profileInsights ? (
                          <p className="mt-3 text-xs opacity-80">Saved! {profile.name || 'Explorer'}, we tuned your feed to {profileInsights.astroSign || 'your sign'} and Life Path {profileInsights.lifePath || '?'}.</p>
                        ) : (
                          <p className="mt-3 text-xs opacity-70">We only store this locally for the demo. Add details to unlock the full home experience.</p>
                        )}
                      </Card>
                {/* Season banner */}
                <Card className="relative overflow-hidden">
                  <div className="flex items-center justify-between">
                    <div>
                      <div className="text-xs uppercase tracking-wider text-indigo-600">Season Pass</div>
                      <h2 className="text-2xl font-bold">{profileInsights?.astroSign || 'Sagittarius'} ‚Äî Aim True</h2>
                      <p className="text-sm opacity-80">{seasonDaysLeft} days left ‚Ä¢ Earn cosmetics & streak freeze tokens</p>
                    </div>
                    <div className="hidden md:block w-48 h-24 bg-indigo-100/60 dark:bg-indigo-900/30 rounded-xl rotate-6" />
                  </div>
                  <div className="mt-4 w-full h-2 rounded-full bg-black/5 dark:bg-white/10 overflow-hidden">
                    <div className="h-full bg-indigo-600" style={{ width: `${clamp((100-xp)/1.2, 10, 100)}%`}} />
                  </div>
                </Card>
      
                {!showOnboarding && profileInsights ? (
                  <Card className="bg-gradient-to-r from-indigo-50 to-white dark:from-indigo-950/60 dark:to-zinc-900">
                    <div className="flex items-center justify-between mb-3">
                      <div>
                        <p className="text-xs uppercase tracking-wide text-indigo-600">Your cosmic brief</p>
                        <h3 className="text-xl font-bold">Calibrated for {profile.name || 'you'}</h3>
                        <p className="text-sm opacity-80">Daily check-ins, quests, and tools now lean on your sign + Life Path.</p>
                      </div>
                      <Button variant="ghost" onClick={() => setShowOnboarding(true)} className="text-xs">Edit</Button>
                    </div>
                    <div className="grid sm:grid-cols-2 gap-3 text-sm">
                      <div className="space-y-1 p-3 rounded-xl bg-white/80 dark:bg-zinc-800/60 border border-black/5 dark:border-white/10">
                        <div className="text-xs opacity-70">Life Path</div>
                        <div className="text-2xl font-black text-indigo-700 dark:text-indigo-200">{profileInsights.lifePath || '?'}</div>
                        <p className="text-xs opacity-80">{LIFE_PATH_BLURBS[profileInsights.lifePath] || 'Add your birth date to compute your path.'}</p>
                      </div>
                      <div className="space-y-1 p-3 rounded-xl bg-white/80 dark:bg-zinc-800/60 border border-black/5 dark:border-white/10">
                        <div className="text-xs opacity-70">Signs</div>
                        <div className="font-semibold">{profileInsights.astroSign || '‚Äî'} ‚Ä¢ {profileInsights.chineseZodiac || '‚Äî'}</div>
                        <p className="text-xs opacity-80">Lucky: {profileInsights.luckyNumbers.join(', ')} ‚Ä¢ Unlucky: {profileInsights.unluckyNumbers.join(', ')}</p>
                      </div>
                      <div className="space-y-1 p-3 rounded-xl bg-white/80 dark:bg-zinc-800/60 border border-black/5 dark:border-white/10">
                        <div className="text-xs uppercase tracking-wide opacity-70">Top birthdays</div>
                        <ul className="text-xs space-y-1">
                          <li>‚ù§Ô∏è Love: {profileInsights.compat?.love?.join(', ')}</li>
                          <li>üíº Business: {profileInsights.compat?.business?.join(', ')}</li>
                          <li>ü§ù Best friend: {profileInsights.compat?.friend?.join(', ')}</li>
                        </ul>
                      </div>
                      <div className="space-y-1 p-3 rounded-xl bg-white/80 dark:bg-zinc-800/60 border border-black/5 dark:border-white/10">
                        <div className="text-xs uppercase tracking-wide opacity-70">Birth chart micro-read</div>
                        <p className="text-sm opacity-80 leading-relaxed">{profileInsights.chart}</p>
                      </div>
                    </div>
                  </Card>
                ) : null}
      
                {/* Check-in */}
                <Card>
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-bold text-lg">1) Daily Check‚Äëin</h3>
                    {checkinAwarded ? <Badge>+25 XP</Badge> : null}
                  </div>
                  <div className="grid sm:grid-cols-3 gap-4">
                    <CheckItem label="Mood" value={mood} setValue={setMood} />
                    <CheckItem label="Focus" value={focus} setValue={setFocus} />
                    <CheckItem label="Connection" value={connection} setValue={setConnection} />
                  </div>
                <div className="flex items-center gap-3 mt-4">
                  <Button onClick={handleCheckin} disabled={!checkinComplete || checkinAwarded}>Complete check‚Äëin</Button>
                  <span className="text-sm opacity-70">Takes 10s ‚Ä¢ Helps tune your brief</span>
                </div>
                {profileInsights ? (
                  <div className="mt-3 text-xs opacity-80 space-y-1">
                    <p>Today is tuned for {profile.name || 'you'} as a {profileInsights.astroSign || '‚Äî'} with Life Path {profileInsights.lifePath || '?'}. Pair your check-in with:</p>
                    <ul className="list-disc pl-4 space-y-1">
                      <li>Run the Energy Calendar to pick your best outreach window.</li>
                      <li>Ask CueChats about a decision tied to your lucky numbers {profileInsights.luckyNumbers.join(', ')}.</li>
                      <li>Invite a {profileInsights.compat?.friend?.[0] || 'best-match'} birthday into your friend tree to play Decision Duel.</li>
                    </ul>
                  </div>
                ) : null}
              </Card>
      
                {/* Guidance */}
                <Card>
                  <div className="flex items-center justify-between mb-2">
                    <h3 className="font-bold text-lg">2) Guidance Drop</h3>
                    <Button variant="ghost" onClick={guidanceViewed}>Mark read</Button>
                  </div>
                  <ul className="list-disc pl-5 space-y-1">
                    {guidance.map((g,i) => <li key={i} className="text-sm">{g}</li>)}
                  </ul>
                  <p className="mt-3 text-xs opacity-70">Entertainment & wellness only. Not medical, legal, or financial advice.</p>
                </Card>
      
                {/* Mini‚Äëgame */}
                <Card>
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-bold text-lg">3) Mini‚Äëgame ‚Äî Decision Duel</h3>
                    {duelDone ? <Badge>Completed</Badge> : null}
                  </div>
                  <div className="space-y-3">
                    <p className="text-md font-medium">{scenario.title}</p>
                    <div className="flex flex-col sm:flex-row gap-3">
                      <Button onClick={() => handleDuel('a')} disabled={duelDone}>A) {scenario.a}</Button>
                      <Button onClick={() => handleDuel('b')} disabled={duelDone} variant="ghost">B) {scenario.b}</Button>
                    </div>
                    {choice && (
                      <div className="mt-2 p-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/40 border border-indigo-200/60 dark:border-indigo-800/50">
                        <p className="text-sm"><b>Tip:</b> {scenario.tip}</p>
                        {duelDone ? (
                          <p className="text-sm mt-1">Outcome: <b>{choice === 'a' ? scenario.a : scenario.b}</b> was favored. <span className="opacity-70">(+XP)</span></p>
                        ) : (
                          <p className="text-sm mt-1 opacity-70">Calculating alignment‚Ä¶</p>
                        )}
                      </div>
                    )}
                    <div className="flex items-center gap-3">
                      <Button variant="ghost" onClick={copyChallenge}>Challenge a friend</Button>
                      <span className="text-sm opacity-70">Co‚Äëop & leaderboards unlock with Plus</span>
                    </div>
                  </div>
                </Card>

                {/* Tools & calculators */}
                <Card>
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-bold text-lg">4) Astra Toolkit</h3>
                    <Badge>New</Badge>
                  </div>
                  <div className="grid lg:grid-cols-2 gap-4">
                    <div className="p-4 rounded-xl bg-indigo-50/70 dark:bg-indigo-900/30 border border-indigo-200/60 dark:border-indigo-800/40">
                      <div className="flex items-center justify-between mb-2">
                        <div>
                          <p className="text-xs uppercase tracking-wide text-indigo-600">Life Path</p>
                          <p className="font-semibold">Numerology snapshot</p>
                        </div>
                        {lifePathNumber ? <Badge>#{lifePathNumber}</Badge> : null}
                      </div>
                      <label className="text-xs opacity-70">Birth date</label>
                      <input
                        type="date"
                        value={birthDate}
                        onChange={(e) => handleLifePathChange(e.target.value)}
                        className="mt-1 w-full px-3 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10 text-sm"
                      />
                      {lifePathNumber ? (
                        <div className="mt-2 text-sm">
                          <p className="font-semibold">Life Path {lifePathNumber}</p>
                          <p className="opacity-80">{LIFE_PATH_BLURBS[lifePathNumber]}</p>
                        </div>
                      ) : (
                        <p className="mt-2 text-xs opacity-70">Enter a birth date to see your core pattern.</p>
                      )}
                    </div>

                    <div className="p-4 rounded-xl bg-emerald-50/70 dark:bg-emerald-900/20 border border-emerald-200/70 dark:border-emerald-800/50">
                      <div className="flex items-center justify-between mb-2">
                        <div>
                          <p className="text-xs uppercase tracking-wide text-emerald-600">Compatibility</p>
                          <p className="font-semibold">Two-person pulse</p>
                        </div>
                        {compatResult ? <Badge>{compatResult.score}%</Badge> : null}
                      </div>
                      <div className="grid grid-cols-2 gap-2 text-xs">
                        <div className="space-y-1">
                          <input
                            type="text"
                            value={compatA.name}
                            onChange={(e) => setCompatA({ ...compatA, name: e.target.value })}
                            className="w-full px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                            placeholder="Name A"
                          />
                          <input
                            type="date"
                            value={compatA.date}
                            onChange={(e) => setCompatA({ ...compatA, date: e.target.value })}
                            className="w-full px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                          />
                        </div>
                        <div className="space-y-1">
                          <input
                            type="text"
                            value={compatB.name}
                            onChange={(e) => setCompatB({ ...compatB, name: e.target.value })}
                            className="w-full px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                            placeholder="Name B"
                          />
                          <input
                            type="date"
                            value={compatB.date}
                            onChange={(e) => setCompatB({ ...compatB, date: e.target.value })}
                            className="w-full px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                          />
                        </div>
                      </div>
                      <div className="flex items-center gap-2 mt-2">
                        <Button variant="ghost" onClick={handleCompat}>
                          Check alignment
                        </Button>
                        <span className="text-xs opacity-70">Uses initials + birthdates for a quick pulse.</span>
                      </div>
                      {compatResult ? (
                        <div className="mt-2 text-sm">
                          <p className="font-semibold">{compatResult.vibe}</p>
                          <p className="opacity-80">{compatResult.anchor}</p>
                        </div>
                      ) : null}
                    </div>
                  </div>

                  <div className="mt-4 p-4 rounded-xl bg-orange-50/70 dark:bg-orange-900/20 border border-orange-200/60 dark:border-orange-800/50">
                    <div className="flex items-center justify-between mb-2">
                      <div>
                        <p className="text-xs uppercase tracking-wide text-orange-600">Timing Calendar</p>
                        <p className="font-semibold">Energy windows</p>
                      </div>
                      <Badge>3-day</Badge>
                    </div>
                    <div className="grid sm:grid-cols-3 gap-3 text-sm">
                      {ENERGY_WINDOWS.map((slot) => (
                        <div
                          key={slot.day}
                          className="p-3 rounded-lg bg-white/70 dark:bg-zinc-800/60 border border-black/5 dark:border-white/10"
                        >
                          <div className="text-xs uppercase tracking-wide opacity-70">{slot.day}</div>
                          <div className="font-semibold">{slot.focus}</div>
                          <div className="text-xs opacity-80">{slot.window}</div>
                          <p className="text-xs mt-1 opacity-80">{slot.cue}</p>
                        </div>
                      ))}
                    </div>
                  </div>
                </Card>
      
              {/* Tools & calculators */}
              <Card>
                <div className="flex items-center justify-between mb-3">
                  <h3 className="font-bold text-lg">4) Astra Toolkit</h3>
                  <Badge>New</Badge>
                </div>
                <div className="grid lg:grid-cols-2 gap-4">
                  <div className="p-4 rounded-xl bg-indigo-50/70 dark:bg-indigo-900/30 border border-indigo-200/60 dark:border-indigo-800/40">
                    <div className="flex items-center justify-between mb-2">
                      <div>
                        <p className="text-xs uppercase tracking-wide text-indigo-600">Life Path</p>
                        <p className="font-semibold">Numerology snapshot</p>
                      </div>
                      {lifePathNumber ? <Badge>#{lifePathNumber}</Badge> : null}
                    </div>
                    <label className="text-xs opacity-70">Birth date</label>
                    <input
                      type="date"
                      value={birthDate}
                      onChange={(e) => handleLifePathChange(e.target.value)}
                      className="mt-1 w-full px-3 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10 text-sm"
                    />
                    {lifePathNumber ? (
                      <div className="mt-2 text-sm">
                        <p className="font-semibold">Life Path {lifePathNumber}</p>
                        <p className="opacity-80">{LIFE_PATH_BLURBS[lifePathNumber]}</p>
                      </div>
                    ) : (
                      <p className="mt-2 text-xs opacity-70">Enter a birth date to see your core pattern.</p>
                    )}
                  </div>
      
                  <div className="p-4 rounded-xl bg-emerald-50/70 dark:bg-emerald-900/20 border border-emerald-200/70 dark:border-emerald-800/50">
                    <div className="flex items-center justify-between mb-2">
                      <div>
                        <p className="text-xs uppercase tracking-wide text-emerald-600">Compatibility</p>
                        <p className="font-semibold">Two-person pulse</p>
                      </div>
                      {compatResult ? <Badge>{compatResult.score}%</Badge> : null}
                    </div>
                    <div className="grid grid-cols-2 gap-2 text-xs">
                      <div className="space-y-1">
                        <input
                          type="text"
                          value={compatA.name}
                          onChange={(e) => setCompatA({ ...compatA, name: e.target.value })}
                          className="w-full px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                          placeholder="Name A"
                        />
                        <input
                          type="date"
                          value={compatA.date}
                          onChange={(e) => setCompatA({ ...compatA, date: e.target.value })}
                          className="w-full px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                        />
                      </div>
                      <div className="space-y-1">
                        <input
                          type="text"
                          value={compatB.name}
                          onChange={(e) => setCompatB({ ...compatB, name: e.target.value })}
                          className="w-full px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                          placeholder="Name B"
                        />
                        <input
                          type="date"
                          value={compatB.date}
                          onChange={(e) => setCompatB({ ...compatB, date: e.target.value })}
                          className="w-full px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10"
                        />
                      </div>
                    </div>
                    <div className="flex items-center gap-2 mt-2">
                      <Button variant="ghost" onClick={handleCompat}>Check alignment</Button>
                      <span className="text-xs opacity-70">Uses initials + birthdates for a quick pulse.</span>
                    </div>
                    {compatResult ? (
                      <div className="mt-2 text-sm">
                        <p className="font-semibold">{compatResult.vibe}</p>
                        <p className="opacity-80">{compatResult.anchor}</p>
                      </div>
                    ) : null}
                  </div>
                </div>
      
                <div className="mt-4 p-4 rounded-xl bg-orange-50/70 dark:bg-orange-900/20 border border-orange-200/60 dark:border-orange-800/50">
                  <div className="flex items-center justify-between mb-2">
                    <div>
                      <p className="text-xs uppercase tracking-wide text-orange-600">Timing Calendar</p>
                      <p className="font-semibold">Energy windows</p>
                    </div>
                    <Badge>3-day</Badge>
                  </div>
                  <div className="grid sm:grid-cols-3 gap-3 text-sm">
                    {ENERGY_WINDOWS.map((slot) => (
                      <div key={slot.day} className="p-3 rounded-lg bg-white/70 dark:bg-zinc-800/60 border border-black/5 dark:border-white/10">
                        <div className="text-xs uppercase tracking-wide opacity-70">{slot.day}</div>
                        <div className="font-semibold">{slot.focus}</div>
                        <div className="text-xs opacity-80">{slot.window}</div>
                        <p className="text-xs mt-1 opacity-80">{slot.cue}</p>
                      </div>
                    ))}
                  </div>
      
                  <div className="p-4 rounded-xl bg-sky-50/70 dark:bg-sky-900/30 border border-sky-200/60 dark:border-sky-800/40">
                    <div className="flex items-center justify-between mb-2">
                      <div>
                        <p className="text-xs uppercase tracking-wide text-sky-600">Calendar</p>
                        <p className="font-semibold">Energy day check</p>
                      </div>
                      {energyOutcome ? <Badge>{energyOutcome.label}</Badge> : null}
                    </div>
                    <label className="text-xs opacity-70">Pick a date</label>
                    <div className="flex items-center gap-2 mt-1">
                      <input
                        type="date"
                        value={energyDate}
                        onChange={(e) => setEnergyDate(e.target.value)}
                        className="w-full px-3 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10 text-sm"
                      />
                      <Button onClick={handleEnergyCalendar} variant="ghost" className="text-xs px-3">Check</Button>
                    </div>
                    {energyOutcome ? (
                      <p className="mt-2 text-sm opacity-80">{energyOutcome.note}</p>
                    ) : (
                      <p className="mt-2 text-xs opacity-70">See if the day leans high-sync, balanced, or recharge.</p>
                    )}
                    {energyAwarded ? <p className="text-xs text-emerald-600 mt-1">+8 XP</p> : null}
                  </div>
      
                  <div className="p-4 rounded-xl bg-purple-50/70 dark:bg-purple-900/30 border border-purple-200/60 dark:border-purple-800/40">
                    <div className="flex items-center justify-between mb-2">
                      <div>
                        <p className="text-xs uppercase tracking-wide text-purple-600">CueChats</p>
                        <p className="font-semibold">Timing Q&A</p>
                      </div>
                      {cueReply ? <Badge>Reply</Badge> : null}
                    </div>
                    <label className="text-xs opacity-70">Ask about timing or compatibility</label>
                    <div className="flex gap-2 mt-1">
                      <input
                        type="text"
                        value={cueQuestion}
                        onChange={(e) => setCueQuestion(e.target.value)}
                        placeholder="e.g., When to launch?"
                        className="w-full px-3 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10 text-sm"
                      />
                      <Button onClick={handleCueChats} variant="ghost" className="text-xs px-3">Ask</Button>
                    </div>
                    {cueReply ? (
                      <p className="mt-2 text-sm opacity-80">{cueReply}</p>
                    ) : (
                      <p className="mt-2 text-xs opacity-70">Get a quick AI-flavored nudge tied to the day‚Äôs energy.</p>
                    )}
                    {cueAwarded ? <p className="text-xs text-emerald-600 mt-1">+8 XP</p> : null}
                  </div>
      
                  <div className="p-4 rounded-xl bg-amber-50/70 dark:bg-amber-900/20 border border-amber-200/60 dark:border-amber-800/40">
                    <div className="flex items-center justify-between mb-2">
                      <div>
                        <p className="text-xs uppercase tracking-wide text-amber-600">Founding Date</p>
                        <p className="font-semibold">Brand energy check</p>
                      </div>
                      {brandResult ? <Badge>{brandResult.tag}</Badge> : null}
                    </div>
                    <div className="grid grid-cols-2 gap-2 text-xs">
                      <div className="space-y-1">
                        <input
                          type="text"
                          value={brandName}
                          onChange={(e) => setBrandName(e.target.value)}
                          placeholder="Brand / project"
                          className="w-full px-3 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10 text-sm"
                        />
                        <label className="text-[11px] opacity-70 block">Name</label>
                      </div>
                      <div className="space-y-1">
                        <input
                          type="date"
                          value={brandDate}
                          onChange={(e) => setBrandDate(e.target.value)}
                          className="w-full px-3 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10 text-sm"
                        />
                        <label className="text-[11px] opacity-70 block">Founding date</label>
                      </div>
                    </div>
                    <div className="flex items-center gap-2 mt-2">
                      <Button onClick={handleBrandCheck} variant="ghost" className="text-xs px-3">Evaluate</Button>
                      {brandResult ? <span className="text-sm font-semibold">{brandResult.score}% fit</span> : null}
                    </div>
                    {brandResult ? (
                      <p className="mt-1 text-xs opacity-80">Tag: {brandResult.tag}. Align launches to high-sync weeks.</p>
                    ) : (
                      <p className="mt-2 text-xs opacity-70">See how a founding date pairs with brand intent.</p>
                    )}
                    {brandAwarded ? <p className="text-xs text-emerald-600 mt-1">+8 XP</p> : null}
                  </div>
                </div>
              </Card>
            </section>
      
              {/* Right column */}
              <aside className="space-y-6">
                {/* House select & board */}
                <Card>
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-bold">House</h3>
                    {house ? <Badge>{house}</Badge> : <Badge>Pick one</Badge>}
                  </div>
                  {house ? (
                    <div>
                      <p className="text-sm opacity-80 mb-2">Top Houses this week</p>
                      <ul className="space-y-2">
                        {leaderboard.map((row, i) => (
                          <li key={row.name} className="flex items-center justify-between text-sm">
                            <span className="flex items-center gap-2"><span className="w-5 text-right">{i+1}.</span> {row.name}</span>
                            <span className="font-semibold">{row.points} pts</span>
                          </li>
                        ))}
                      </ul>
                    </div>
                  ) : (
                    <div className="grid grid-cols-3 gap-2">
                      {HOUSES.map(h => (
                        <button key={h} onClick={() => setHouse(h)} className="text-sm px-3 py-2 rounded-lg bg-black/5 dark:bg-white/10 hover:bg-black/10 dark:hover:bg-white/20">
                          {h}
                        </button>
                      ))}
                    </div>
                  )}
                </Card>
      
                <Card>
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-bold">Friend tree</h3>
                    <Badge>{profileInsights?.lifePath ? `LP ${profileInsights.lifePath}` : 'Invite'}</Badge>
                  </div>
                  <p className="text-sm opacity-80 mb-2">Build a playful map of friends, family, and new people you meet by Life Path and birthday.</p>
                  <ul className="space-y-2 text-sm">
                    {friendTree.length ? friendTree.map((f, idx) => (
                      <li key={`${f.name}-${idx}`} className="flex items-center justify-between rounded-lg bg-black/5 dark:bg-white/5 px-3 py-2">
                        <div>
                          <div className="font-semibold">{f.name} ‚Ä¢ {f.role}</div>
                          <div className="text-xs opacity-70">Birthday: {f.birthday}</div>
                        </div>
                        <span className="text-xs opacity-70">Invite to duel</span>
                      </li>
                    )) : <li className="text-xs opacity-70">Add someone with a great birthday match to start your tree.</li>}
                  </ul>
                  <div className="grid grid-cols-3 gap-2 text-xs mt-3">
                    <input value={newFriend.name} onChange={(e) => setNewFriend({ ...newFriend, name: e.target.value })} placeholder="Name" className="px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10" />
                    <input value={newFriend.birthday} onChange={(e) => setNewFriend({ ...newFriend, birthday: e.target.value })} type="date" className="px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10" />
                    <input value={newFriend.role} onChange={(e) => setNewFriend({ ...newFriend, role: e.target.value })} placeholder="Role" className="px-2 py-2 rounded-lg bg-white/80 dark:bg-zinc-800/80 border border-black/10 dark:border-white/10" />
                  </div>
                  <div className="flex items-center justify-between mt-2">
                    <Button variant="ghost" onClick={addFriendToTree} className="text-xs px-3">Add to tree</Button>
                    {profileInsights?.compat ? (
                      <span className="text-[11px] opacity-70">Try inviting birthdays: {profileInsights.compat.friend?.slice(0,2).join(', ')}</span>
                    ) : null}
                  </div>
                </Card>
      
                {/* Quests */}
                <Card>
                  <div className="flex items-center justify-between mb-3">
                    <h3 className="font-bold">Quests</h3>
                    <Badge>Daily</Badge>
                  </div>
                  <ul className="space-y-2">
                    {quests.map(q => (
                      <li key={q.id} className="flex items-center justify-between text-sm">
                        <label className="flex items-center gap-2">
                          <input type="checkbox" checked={q.done} onChange={() => completeQuest(q.id)} />
                          {q.label}
                        </label>
                        <span className="text-xs opacity-70">{q.done ? 'claimed' : `+${q.xp} XP`}</span>
                      </li>
                    ))}
                  </ul>
                </Card>
      
                {/* Wallet / Plus */}
                <Card>
                  <h3 className="font-bold mb-2">Wallet</h3>
                  <div className="flex items-center justify-between">
                    <div>
                      <div className="text-sm opacity-80">Stars (soft currency)</div>
                      <div className="text-2xl font-extrabold">{stars}</div>
                    </div>
                    <div className="text-right">
                      <div className="text-sm opacity-80">Astra Plus</div>
                      <div className="text-lg font-bold">$9.99/mo</div>
                      <Button className="mt-2">Start free trial</Button>
                    </div>
                  </div>
                </Card>
      
                {/* Disclaimers */}
                <Card className="text-xs opacity-80">
                  <p>Wellness & entertainment only. No medical, financial, or legal advice. Data used locally for personalization. Age 13+.</p>
                </Card>
              </aside>
            </main>
      
            <footer className="max-w-6xl mx-auto px-4 pb-10 text-xs opacity-70">
              Built for demo: Core loop (check‚Äëin ‚Üí brief ‚Üí mini‚Äëgame ‚Üí rewards), season pass feel, Houses, daily quests, wallet, theme toggle. No tracking; all state is in‚Äëmemory.
            </footer>
          </div>
        );
      }
      
      function CheckItem({ label, value, setValue }){
        const Opt = ({ v, emoji, name }) => (
          <button onClick={() => setValue(v)} className={`flex-1 px-3 py-2 rounded-xl border text-sm transition ${value===v? 'bg-indigo-600 text-white border-indigo-600' : 'bg-white/60 dark:bg-zinc-800/60 border-black/10 dark:border-white/10 hover:bg-black/5 dark:hover:bg-white/5'}`}>
            <div className="text-lg">{emoji}</div>
            <div className="mt-1">{name}</div>
          </button>
        );
        return (
          <div className="space-y-2">
            <div className="text-sm font-semibold">{label}</div>
            <div className="flex gap-2">
              <Opt v="low" emoji="üå•Ô∏è" name="Low" />
              <Opt v="ok" emoji="‚õÖ" name="OK" />
              <Opt v="high" emoji="‚òÄÔ∏è" name="High" />
            </div>
          </div>
        );
      }
      const rootEl = document.getElementById("root");
      ReactDOM.createRoot(rootEl).render(<AstraPlayDemo />);
    </script>
  </body>
</html>
